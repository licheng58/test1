{"version":3,"sources":["webpack:///./src/views/pro/brand/components/BrandDetail.vue?9a20","webpack:///src/views/pro/brand/components/BrandDetail.vue","webpack:///./src/views/pro/brand/components/BrandDetail.vue?5710","webpack:///./src/views/pro/brand/components/BrandDetail.vue","webpack:///./src/components/Upload/singleUpload.vue?db03","webpack:///src/components/Upload/singleUpload.vue","webpack:///./src/components/Upload/singleUpload.vue?3b96","webpack:///./src/components/Upload/singleUpload.vue","webpack:///./src/api/oss.js","webpack:///./src/views/pro/brand/update.vue?6d5d","webpack:///src/views/pro/brand/update.vue","webpack:///./src/views/pro/brand/update.vue?c213","webpack:///./src/views/pro/brand/update.vue","webpack:///./src/api/brand.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","ref","brand","rules","model","value","callback","$$v","$set","expression","_n","_v","on","$event","onSubmit","isEdit","_e","resetForm","staticRenderFns","component","useOss","ossUploadUrl","minioUploadUrl","dataObj","showFileList","fileList","beforeUpload","handleRemove","handleUploadSuccess","handlePreview","slot","dialogVisible","url","policy","request","method","fetchList","params","createBrand","data","updateShowStatus","updateFactoryStatus","deleteBrand","id","getBrand","updateBrand"],"mappings":"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","file":"js/chunk-5815da1b.35e009f6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"form-container\",attrs:{\"shadow\":\"never\"}},[_c('el-form',{ref:\"brandFrom\",attrs:{\"model\":_vm.brand,\"rules\":_vm.rules,\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"品牌名称：\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.brand.name),callback:function ($$v) {_vm.$set(_vm.brand, \"name\", $$v)},expression:\"brand.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌首字母：\"}},[_c('el-input',{model:{value:(_vm.brand.firstLetter),callback:function ($$v) {_vm.$set(_vm.brand, \"firstLetter\", $$v)},expression:\"brand.firstLetter\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌LOGO：\",\"prop\":\"logo\"}},[_c('single-upload',{model:{value:(_vm.brand.logo),callback:function ($$v) {_vm.$set(_vm.brand, \"logo\", $$v)},expression:\"brand.logo\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌专区大图：\"}},[_c('single-upload',{model:{value:(_vm.brand.bigPic),callback:function ($$v) {_vm.$set(_vm.brand, \"bigPic\", $$v)},expression:\"brand.bigPic\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌故事：\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"type\":\"textarea\",\"autosize\":true},model:{value:(_vm.brand.brandStory),callback:function ($$v) {_vm.$set(_vm.brand, \"brandStory\", $$v)},expression:\"brand.brandStory\"}})],1),_c('el-form-item',{attrs:{\"label\":\"排序：\",\"prop\":\"sort\"}},[_c('el-input',{model:{value:(_vm.brand.sort),callback:function ($$v) {_vm.$set(_vm.brand, \"sort\", _vm._n($$v))},expression:\"brand.sort\"}})],1),_c('el-form-item',{attrs:{\"label\":\"是否显示：\"}},[_c('el-radio-group',{model:{value:(_vm.brand.showStatus),callback:function ($$v) {_vm.$set(_vm.brand, \"showStatus\", $$v)},expression:\"brand.showStatus\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"是\")]),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"否\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"品牌制造商：\"}},[_c('el-radio-group',{model:{value:(_vm.brand.factoryStatus),callback:function ($$v) {_vm.$set(_vm.brand, \"factoryStatus\", $$v)},expression:\"brand.factoryStatus\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"是\")]),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"否\")])],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit('brandFrom')}}},[_vm._v(\"提交\")]),(!_vm.isEdit)?_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('brandFrom')}}},[_vm._v(\"重置\")]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template> \r\n  <el-card class=\"form-container\" shadow=\"never\">\r\n    <el-form :model=\"brand\" :rules=\"rules\" ref=\"brandFrom\" label-width=\"150px\">\r\n      <el-form-item label=\"品牌名称：\" prop=\"name\">\r\n        <el-input v-model=\"brand.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"品牌首字母：\">\r\n        <el-input v-model=\"brand.firstLetter\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"品牌LOGO：\" prop=\"logo\">\r\n        <single-upload v-model=\"brand.logo\"></single-upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"品牌专区大图：\">\r\n        <single-upload v-model=\"brand.bigPic\"></single-upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"品牌故事：\">\r\n        <el-input\r\n          placeholder=\"请输入内容\"\r\n          type=\"textarea\"\r\n          v-model=\"brand.brandStory\"\r\n          :autosize=\"true\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"排序：\" prop=\"sort\">\r\n        <el-input v-model.number=\"brand.sort\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"是否显示：\">\r\n        <el-radio-group v-model=\"brand.showStatus\">\r\n          <el-radio :label=\"1\">是</el-radio>\r\n          <el-radio :label=\"0\">否</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"品牌制造商：\">\r\n        <el-radio-group v-model=\"brand.factoryStatus\">\r\n          <el-radio :label=\"1\">是</el-radio>\r\n          <el-radio :label=\"0\">否</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"onSubmit('brandFrom')\">提交</el-button>\r\n        <el-button v-if=\"!isEdit\" @click=\"resetForm('brandFrom')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-card>\r\n</template>\r\n<script>\r\n  import {createBrand, getBrand, updateBrand} from '@/api/brand'\r\n  import SingleUpload from '@/components/Upload/singleUpload'\r\n  const defaultBrand={\r\n    bigPic: '',\r\n    brandStory: '',\r\n    factoryStatus: 0,\r\n    firstLetter: '',\r\n    logo: '',\r\n    name: '',\r\n    showStatus: 0,\r\n    sort: 0\r\n  };\r\n  export default {\r\n    name: 'BrandDetail',\r\n    components:{SingleUpload},\r\n    props: {\r\n      isEdit: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        brand:Object.assign({}, defaultBrand),\r\n        rules: {\r\n          name: [\r\n            {required: true, message: '请输入品牌名称', trigger: 'blur'},\r\n            {min: 2, max: 140, message: '长度在 2 到 140 个字符', trigger: 'blur'}\r\n          ],\r\n          logo: [\r\n            {required: true, message: '请输入品牌logo', trigger: 'blur'}\r\n          ],\r\n          sort: [\r\n            {type: 'number', message: '排序必须为数字'}\r\n          ],\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      if (this.isEdit) {\r\n        getBrand(this.$route.query.id).then(response => {\r\n          this.brand = response.data;\r\n        });\r\n      }else{\r\n        this.brand = Object.assign({},defaultBrand);\r\n      }\r\n    },\r\n    methods: {\r\n      onSubmit(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.$confirm('是否提交数据', '提示', {\r\n              confirmButtonText: '确定',\r\n              cancelButtonText: '取消',\r\n              type: 'warning'\r\n            }).then(() => {\r\n              if (this.isEdit) {\r\n                updateBrand(this.$route.query.id, this.brand).then(response => {\r\n                  this.$refs[formName].resetFields();\r\n                  this.$message({\r\n                    message: '修改成功',\r\n                    type: 'success',\r\n                    duration:1000\r\n                  });\r\n                  this.$router.back();\r\n                });\r\n              } else {\r\n                createBrand(this.brand).then(response => {\r\n                  this.$refs[formName].resetFields();\r\n                  this.brand = Object.assign({},defaultBrand);\r\n                  this.$message({\r\n                    message: '提交成功',\r\n                    type: 'success',\r\n                    duration:1000\r\n                  });\r\n                });\r\n              }\r\n            });\r\n\r\n          } else {\r\n            this.$message({\r\n              message: '验证失败',\r\n              type: 'error',\r\n              duration:1000\r\n            });\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n        this.brand = Object.assign({},defaultBrand);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BrandDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BrandDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BrandDetail.vue?vue&type=template&id=c7040cf6&\"\nimport script from \"./BrandDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./BrandDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{attrs:{\"action\":_vm.useOss?_vm.ossUploadUrl:_vm.minioUploadUrl,\"data\":_vm.useOss?_vm.dataObj:null,\"list-type\":\"picture\",\"multiple\":false,\"show-file-list\":_vm.showFileList,\"file-list\":_vm.fileList,\"before-upload\":_vm.beforeUpload,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.handleUploadSuccess,\"on-preview\":_vm.handlePreview}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过10MB\")])],1),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.fileList[0].url,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template> \r\n  <div>\r\n    <el-upload\r\n      :action=\"useOss?ossUploadUrl:minioUploadUrl\"\r\n      :data=\"useOss?dataObj:null\"\r\n      list-type=\"picture\"\r\n      :multiple=\"false\" :show-file-list=\"showFileList\"\r\n      :file-list=\"fileList\"\r\n      :before-upload=\"beforeUpload\"\r\n      :on-remove=\"handleRemove\"\r\n      :on-success=\"handleUploadSuccess\"\r\n      :on-preview=\"handlePreview\">\r\n      <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n      <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过10MB</div>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\">\r\n      <img width=\"100%\" :src=\"fileList[0].url\" alt=\"\">\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {policy} from '@/api/oss'\r\n\r\n  export default {\r\n    name: 'singleUpload',\r\n    props: {\r\n      value: String\r\n    },\r\n    computed: {\r\n      imageUrl() {\r\n        return this.value;\r\n      },\r\n      imageName() {\r\n        if (this.value != null && this.value !== '') {\r\n          return this.value.substr(this.value.lastIndexOf(\"/\") + 1);\r\n        } else {\r\n          return null;\r\n        }\r\n      },\r\n      fileList() {\r\n        return [{\r\n          name: this.imageName,\r\n          url: this.imageUrl\r\n        }]\r\n      },\r\n      showFileList: {\r\n        get: function () {\r\n          return this.value !== null && this.value !== ''&& this.value!==undefined;\r\n        },\r\n        set: function (newValue) {\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        dataObj: {\r\n          policy: '',\r\n          signature: '',\r\n          key: '',\r\n          ossaccessKeyId: '',\r\n          dir: '',\r\n          host: '',\r\n          // callback:'',\r\n        },\r\n        dialogVisible: false,\r\n        useOss:true, //使用oss->true;使用MinIO->false\r\n        ossUploadUrl:'http://macro-oss.oss-cn-shenzhen.aliyuncs.com',\r\n        minioUploadUrl:'http://localhost:8080/minio/upload',\r\n      };\r\n    },\r\n    methods: {\r\n      emitInput(val) {\r\n        this.$emit('input', val)\r\n      },\r\n      handleRemove(file, fileList) {\r\n        this.emitInput('');\r\n      },\r\n      handlePreview(file) {\r\n        this.dialogVisible = true;\r\n      },\r\n      beforeUpload(file) {\r\n        let _self = this;\r\n        if(!this.useOss){\r\n          //不使用oss不需要获取策略\r\n          return true;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n          policy().then(response => {\r\n            _self.dataObj.policy = response.data.policy;\r\n            _self.dataObj.signature = response.data.signature;\r\n            _self.dataObj.ossaccessKeyId = response.data.accessKeyId;\r\n            _self.dataObj.key = response.data.dir + '/${filename}';\r\n            _self.dataObj.dir = response.data.dir;\r\n            _self.dataObj.host = response.data.host;\r\n            // _self.dataObj.callback = response.data.callback;\r\n            resolve(true)\r\n          }).catch(err => {\r\n            console.log(err)\r\n            reject(false)\r\n          })\r\n        })\r\n      },\r\n      handleUploadSuccess(res, file) {\r\n        this.showFileList = true;\r\n        this.fileList.pop();\r\n        let url = this.dataObj.host + '/' + this.dataObj.dir + '/' + file.name;\r\n        if(!this.useOss){\r\n          //不使用oss直接获取图片路径\r\n          url = res.data.url;\r\n        }\r\n        this.fileList.push({name: file.name, url: url});\r\n        this.emitInput(this.fileList[0].url);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singleUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singleUpload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./singleUpload.vue?vue&type=template&id=5a82ff78&\"\nimport script from \"./singleUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./singleUpload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n\r\n// 上传图片\r\nexport function policy() {\r\n  return request({\r\n    url: '/aliyun/oss/policy',\r\n    method: 'get',\r\n  })\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('brand-detail',{attrs:{\"is-edit\":true}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template> \r\n  <brand-detail :is-edit='true'></brand-detail>\r\n</template>\r\n<script>\r\n  import BrandDetail from './components/BrandDetail'\r\n  export default {\r\n    name: 'updateBrand',\r\n    components: { BrandDetail }\r\n  }\r\n</script>\r\n<style>\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./update.vue?vue&type=template&id=7dd0f208&\"\nimport script from \"./update.vue?vue&type=script&lang=js&\"\nexport * from \"./update.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\nexport function fetchList(params) {\r\n  return request({\r\n    url:'/brand/list',\r\n    method:'get',\r\n    params:params\r\n  })\r\n}\r\nexport function createBrand(data) {\r\n  return request({\r\n    url:'/brand/create',\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\nexport function updateShowStatus(data) {\r\n  return request({\r\n    url:'/brand/update/showStatus',\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\n\r\nexport function updateFactoryStatus(data) {\r\n  return request({\r\n    url:'/brand/update/factoryStatus',\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\n\r\nexport function deleteBrand(id) {\r\n  return request({\r\n    url:'/brand/delete/'+id,\r\n    method:'get',\r\n  })\r\n}\r\n\r\nexport function getBrand(id) {\r\n  return request({\r\n    url:'/brand/'+id,\r\n    method:'get',\r\n  })\r\n}\r\n\r\nexport function updateBrand(id,data) {\r\n  return request({\r\n    url:'/brand/update/'+id,\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\n\r\n"],"sourceRoot":""}