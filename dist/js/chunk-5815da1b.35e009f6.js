(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5815da1b"],{"0b47":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[a("el-form",{ref:"brandFrom",attrs:{model:t.brand,rules:t.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"品牌名称：",prop:"name"}},[a("el-input",{model:{value:t.brand.name,callback:function(e){t.$set(t.brand,"name",e)},expression:"brand.name"}})],1),a("el-form-item",{attrs:{label:"品牌首字母："}},[a("el-input",{model:{value:t.brand.firstLetter,callback:function(e){t.$set(t.brand,"firstLetter",e)},expression:"brand.firstLetter"}})],1),a("el-form-item",{attrs:{label:"品牌LOGO：",prop:"logo"}},[a("single-upload",{model:{value:t.brand.logo,callback:function(e){t.$set(t.brand,"logo",e)},expression:"brand.logo"}})],1),a("el-form-item",{attrs:{label:"品牌专区大图："}},[a("single-upload",{model:{value:t.brand.bigPic,callback:function(e){t.$set(t.brand,"bigPic",e)},expression:"brand.bigPic"}})],1),a("el-form-item",{attrs:{label:"品牌故事："}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"textarea",autosize:!0},model:{value:t.brand.brandStory,callback:function(e){t.$set(t.brand,"brandStory",e)},expression:"brand.brandStory"}})],1),a("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[a("el-input",{model:{value:t.brand.sort,callback:function(e){t.$set(t.brand,"sort",t._n(e))},expression:"brand.sort"}})],1),a("el-form-item",{attrs:{label:"是否显示："}},[a("el-radio-group",{model:{value:t.brand.showStatus,callback:function(e){t.$set(t.brand,"showStatus",e)},expression:"brand.showStatus"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("el-form-item",{attrs:{label:"品牌制造商："}},[a("el-radio-group",{model:{value:t.brand.factoryStatus,callback:function(e){t.$set(t.brand,"factoryStatus",e)},expression:"brand.factoryStatus"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("brandFrom")}}},[t._v("提交")]),t.isEdit?t._e():a("el-button",{on:{click:function(e){return t.resetForm("brandFrom")}}},[t._v("重置")])],1)],1)],1)},r=[],s=a("9add"),i=a("0f39"),o={bigPic:"",brandStory:"",factoryStatus:0,firstLetter:"",logo:"",name:"",showStatus:0,sort:0},l={name:"BrandDetail",components:{SingleUpload:i["a"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{brand:Object.assign({},o),rules:{name:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],logo:[{required:!0,message:"请输入品牌logo",trigger:"blur"}],sort:[{type:"number",message:"排序必须为数字"}]}}},created:function(){var t=this;this.isEdit?Object(s["d"])(this.$route.query.id).then((function(e){t.brand=e.data})):this.brand=Object.assign({},o)},methods:{onSubmit:function(t){var e=this;this.$refs[t].validate((function(a){if(!a)return e.$message({message:"验证失败",type:"error",duration:1e3}),!1;e.$confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.isEdit?Object(s["e"])(e.$route.query.id,e.brand).then((function(a){e.$refs[t].resetFields(),e.$message({message:"修改成功",type:"success",duration:1e3}),e.$router.back()})):Object(s["a"])(e.brand).then((function(a){e.$refs[t].resetFields(),e.brand=Object.assign({},o),e.$message({message:"提交成功",type:"success",duration:1e3})}))}))}))},resetForm:function(t){this.$refs[t].resetFields(),this.brand=Object.assign({},o)}}},u=l,d=a("2877"),c=Object(d["a"])(u,n,r,!1,null,null,null);e["a"]=c.exports},"0f39":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{attrs:{action:t.useOss?t.ossUploadUrl:t.minioUploadUrl,data:t.useOss?t.dataObj:null,"list-type":"picture",multiple:!1,"show-file-list":t.showFileList,"file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过10MB")])],1),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.fileList[0].url,alt:""}})])],1)},r=[],s=(a("d3b7"),a("b0c0"),a("6e0d")),i={name:"singleUpload",props:{value:String},computed:{imageUrl:function(){return this.value},imageName:function(){return null!=this.value&&""!==this.value?this.value.substr(this.value.lastIndexOf("/")+1):null},fileList:function(){return[{name:this.imageName,url:this.imageUrl}]},showFileList:{get:function(){return null!==this.value&&""!==this.value&&void 0!==this.value},set:function(t){}}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1,useOss:!0,ossUploadUrl:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com",minioUploadUrl:"http://localhost:8080/minio/upload"}},methods:{emitInput:function(t){this.$emit("input",t)},handleRemove:function(t,e){this.emitInput("")},handlePreview:function(t){this.dialogVisible=!0},beforeUpload:function(t){var e=this;return!this.useOss||new Promise((function(t,a){Object(s["a"])().then((function(a){e.dataObj.policy=a.data.policy,e.dataObj.signature=a.data.signature,e.dataObj.ossaccessKeyId=a.data.accessKeyId,e.dataObj.key=a.data.dir+"/${filename}",e.dataObj.dir=a.data.dir,e.dataObj.host=a.data.host,t(!0)})).catch((function(t){console.log(t),a(!1)}))}))},handleUploadSuccess:function(t,e){this.showFileList=!0,this.fileList.pop();var a=this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name;this.useOss||(a=t.data.url),this.fileList.push({name:e.name,url:a}),this.emitInput(this.fileList[0].url)}}},o=i,l=a("2877"),u=Object(l["a"])(o,n,r,!1,null,null,null);e["a"]=u.exports},"6e0d":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a("b775");function r(){return Object(n["a"])({url:"/aliyun/oss/policy",method:"get"})}},"8db9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("brand-detail",{attrs:{"is-edit":!0}})},r=[],s=a("0b47"),i={name:"updateBrand",components:{BrandDetail:s["a"]}},o=i,l=a("2877"),u=Object(l["a"])(o,n,r,!1,null,null,null);e["default"]=u.exports},"9add":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"g",(function(){return i})),a.d(e,"f",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return u})),a.d(e,"e",(function(){return d}));var n=a("b775");function r(t){return Object(n["a"])({url:"/brand/list",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/brand/create",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/brand/update/showStatus",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/brand/update/factoryStatus",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/brand/delete/"+t,method:"get"})}function u(t){return Object(n["a"])({url:"/brand/"+t,method:"get"})}function d(t,e){return Object(n["a"])({url:"/brand/update/"+t,method:"post",data:e})}}}]);
//# sourceMappingURL=chunk-5815da1b.35e009f6.js.map