{"version":3,"sources":["webpack:///./src/components/Upload/singleUpload.vue?db03","webpack:///src/components/Upload/singleUpload.vue","webpack:///./src/components/Upload/singleUpload.vue?3b96","webpack:///./src/components/Upload/singleUpload.vue","webpack:///./src/views/sem/noticeList/components/HomeAdvertiseDetail.vue?f7fb","webpack:///src/views/sem/noticeList/components/HomeAdvertiseDetail.vue","webpack:///./src/views/sem/noticeList/components/HomeAdvertiseDetail.vue?f822","webpack:///./src/views/sem/noticeList/components/HomeAdvertiseDetail.vue","webpack:///./src/views/sem/noticeList/components/HomeAdvertiseDetail.vue?58c4","webpack:///./src/api/oss.js","webpack:///./src/api/homeAdvertise.js","webpack:///./src/views/sem/noticeList/update.vue?d61d","webpack:///src/views/sem/noticeList/update.vue","webpack:///./src/views/sem/noticeList/update.vue?2317","webpack:///./src/views/sem/noticeList/update.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","useOss","ossUploadUrl","minioUploadUrl","dataObj","showFileList","fileList","beforeUpload","handleRemove","handleUploadSuccess","handlePreview","_v","staticClass","slot","dialogVisible","on","$event","url","staticRenderFns","component","ref","homeAdvertise","rules","model","value","callback","$$v","$set","expression","_l","type","key","label","onSubmit","isEdit","_e","resetForm","name","pic","startTime","endTime","status","note","sort","components","props","Boolean","default","data","typeOptions","Object","assign","defaultTypeOptions","created","defaultHomeAdvertise","methods","$refs","formName","validate","valid","message","duration","confirmButtonText","cancelButtonText","resetFields","policy","request","method","fetchList","params","updateStatus","id","deleteHomeAdvertise","createHomeAdvertise","getHomeAdvertise","updateHomeAdvertise"],"mappings":"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","file":"js/chunk-6ac2d844.85322868.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{attrs:{\"action\":_vm.useOss?_vm.ossUploadUrl:_vm.minioUploadUrl,\"data\":_vm.useOss?_vm.dataObj:null,\"list-type\":\"picture\",\"multiple\":false,\"show-file-list\":_vm.showFileList,\"file-list\":_vm.fileList,\"before-upload\":_vm.beforeUpload,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.handleUploadSuccess,\"on-preview\":_vm.handlePreview}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过10MB\")])],1),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.fileList[0].url,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template> \r\n  <div>\r\n    <el-upload\r\n      :action=\"useOss?ossUploadUrl:minioUploadUrl\"\r\n      :data=\"useOss?dataObj:null\"\r\n      list-type=\"picture\"\r\n      :multiple=\"false\" :show-file-list=\"showFileList\"\r\n      :file-list=\"fileList\"\r\n      :before-upload=\"beforeUpload\"\r\n      :on-remove=\"handleRemove\"\r\n      :on-success=\"handleUploadSuccess\"\r\n      :on-preview=\"handlePreview\">\r\n      <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n      <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过10MB</div>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\">\r\n      <img width=\"100%\" :src=\"fileList[0].url\" alt=\"\">\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {policy} from '@/api/oss'\r\n\r\n  export default {\r\n    name: 'singleUpload',\r\n    props: {\r\n      value: String\r\n    },\r\n    computed: {\r\n      imageUrl() {\r\n        return this.value;\r\n      },\r\n      imageName() {\r\n        if (this.value != null && this.value !== '') {\r\n          return this.value.substr(this.value.lastIndexOf(\"/\") + 1);\r\n        } else {\r\n          return null;\r\n        }\r\n      },\r\n      fileList() {\r\n        return [{\r\n          name: this.imageName,\r\n          url: this.imageUrl\r\n        }]\r\n      },\r\n      showFileList: {\r\n        get: function () {\r\n          return this.value !== null && this.value !== ''&& this.value!==undefined;\r\n        },\r\n        set: function (newValue) {\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        dataObj: {\r\n          policy: '',\r\n          signature: '',\r\n          key: '',\r\n          ossaccessKeyId: '',\r\n          dir: '',\r\n          host: '',\r\n          // callback:'',\r\n        },\r\n        dialogVisible: false,\r\n        useOss:true, //使用oss->true;使用MinIO->false\r\n        ossUploadUrl:'http://macro-oss.oss-cn-shenzhen.aliyuncs.com',\r\n        minioUploadUrl:'http://localhost:8080/minio/upload',\r\n      };\r\n    },\r\n    methods: {\r\n      emitInput(val) {\r\n        this.$emit('input', val)\r\n      },\r\n      handleRemove(file, fileList) {\r\n        this.emitInput('');\r\n      },\r\n      handlePreview(file) {\r\n        this.dialogVisible = true;\r\n      },\r\n      beforeUpload(file) {\r\n        let _self = this;\r\n        if(!this.useOss){\r\n          //不使用oss不需要获取策略\r\n          return true;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n          policy().then(response => {\r\n            _self.dataObj.policy = response.data.policy;\r\n            _self.dataObj.signature = response.data.signature;\r\n            _self.dataObj.ossaccessKeyId = response.data.accessKeyId;\r\n            _self.dataObj.key = response.data.dir + '/${filename}';\r\n            _self.dataObj.dir = response.data.dir;\r\n            _self.dataObj.host = response.data.host;\r\n            // _self.dataObj.callback = response.data.callback;\r\n            resolve(true)\r\n          }).catch(err => {\r\n            console.log(err)\r\n            reject(false)\r\n          })\r\n        })\r\n      },\r\n      handleUploadSuccess(res, file) {\r\n        this.showFileList = true;\r\n        this.fileList.pop();\r\n        let url = this.dataObj.host + '/' + this.dataObj.dir + '/' + file.name;\r\n        if(!this.useOss){\r\n          //不使用oss直接获取图片路径\r\n          url = res.data.url;\r\n        }\r\n        this.fileList.push({name: file.name, url: url});\r\n        this.emitInput(this.fileList[0].url);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singleUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singleUpload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./singleUpload.vue?vue&type=template&id=5a82ff78&\"\nimport script from \"./singleUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./singleUpload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"form-container\",attrs:{\"shadow\":\"never\"}},[_c('el-form',{ref:\"homeAdvertiseFrom\",attrs:{\"model\":_vm.homeAdvertise,\"rules\":_vm.rules,\"label-width\":\"150px\",\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"广告名称：\",\"prop\":\"name\"}},[_c('el-input',{staticClass:\"input-width\",model:{value:(_vm.homeAdvertise.name),callback:function ($$v) {_vm.$set(_vm.homeAdvertise, \"name\", $$v)},expression:\"homeAdvertise.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"广告位置：\"}},[_c('el-select',{model:{value:(_vm.homeAdvertise.type),callback:function ($$v) {_vm.$set(_vm.homeAdvertise, \"type\", $$v)},expression:\"homeAdvertise.type\"}},_vm._l((_vm.typeOptions),function(type){return _c('el-option',{key:type.value,attrs:{\"label\":type.label,\"value\":type.value}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"开始时间：\",\"prop\":\"startTime\"}},[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"选择日期\"},model:{value:(_vm.homeAdvertise.startTime),callback:function ($$v) {_vm.$set(_vm.homeAdvertise, \"startTime\", $$v)},expression:\"homeAdvertise.startTime\"}})],1),_c('el-form-item',{attrs:{\"label\":\"到期时间：\",\"prop\":\"endTime\"}},[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"选择日期\"},model:{value:(_vm.homeAdvertise.endTime),callback:function ($$v) {_vm.$set(_vm.homeAdvertise, \"endTime\", $$v)},expression:\"homeAdvertise.endTime\"}})],1),_c('el-form-item',{attrs:{\"label\":\"上线/下线：\"}},[_c('el-radio-group',{model:{value:(_vm.homeAdvertise.status),callback:function ($$v) {_vm.$set(_vm.homeAdvertise, \"status\", $$v)},expression:\"homeAdvertise.status\"}},[_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"下线\")]),_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"上线\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"广告图片：\"}},[_c('single-upload',{model:{value:(_vm.homeAdvertise.pic),callback:function ($$v) {_vm.$set(_vm.homeAdvertise, \"pic\", $$v)},expression:\"homeAdvertise.pic\"}})],1),_c('el-form-item',{attrs:{\"label\":\"排序：\"}},[_c('el-input',{staticClass:\"input-width\",model:{value:(_vm.homeAdvertise.sort),callback:function ($$v) {_vm.$set(_vm.homeAdvertise, \"sort\", $$v)},expression:\"homeAdvertise.sort\"}})],1),_c('el-form-item',{attrs:{\"label\":\"广告链接：\",\"prop\":\"url\"}},[_c('el-input',{staticClass:\"input-width\",model:{value:(_vm.homeAdvertise.url),callback:function ($$v) {_vm.$set(_vm.homeAdvertise, \"url\", $$v)},expression:\"homeAdvertise.url\"}})],1),_c('el-form-item',{attrs:{\"label\":\"广告备注：\"}},[_c('el-input',{staticClass:\"input-width\",attrs:{\"type\":\"textarea\",\"rows\":5,\"placeholder\":\"请输入内容\"},model:{value:(_vm.homeAdvertise.note),callback:function ($$v) {_vm.$set(_vm.homeAdvertise, \"note\", $$v)},expression:\"homeAdvertise.note\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit('homeAdvertiseFrom')}}},[_vm._v(\"提交\")]),(!_vm.isEdit)?_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('homeAdvertiseFrom')}}},[_vm._v(\"重置\")]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-card class=\"form-container\" shadow=\"never\">\r\n    <el-form\r\n      :model=\"homeAdvertise\"\r\n      :rules=\"rules\"\r\n      ref=\"homeAdvertiseFrom\"\r\n      label-width=\"150px\"\r\n      size=\"small\"\r\n    >\r\n      <el-form-item label=\"广告名称：\" prop=\"name\">\r\n        <el-input v-model=\"homeAdvertise.name\" class=\"input-width\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"广告位置：\">\r\n        <el-select v-model=\"homeAdvertise.type\">\r\n          <el-option\r\n            v-for=\"type in typeOptions\"\r\n            :key=\"type.value\"\r\n            :label=\"type.label\"\r\n            :value=\"type.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"开始时间：\" prop=\"startTime\">\r\n        <el-date-picker\r\n          type=\"datetime\"\r\n          placeholder=\"选择日期\"\r\n          v-model=\"homeAdvertise.startTime\"\r\n        ></el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item label=\"到期时间：\" prop=\"endTime\">\r\n        <el-date-picker\r\n          type=\"datetime\"\r\n          placeholder=\"选择日期\"\r\n          v-model=\"homeAdvertise.endTime\"\r\n        ></el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item label=\"上线/下线：\">\r\n        <el-radio-group v-model=\"homeAdvertise.status\">\r\n          <el-radio :label=\"0\">下线</el-radio>\r\n          <el-radio :label=\"1\">上线</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"广告图片：\">\r\n        <single-upload v-model=\"homeAdvertise.pic\"></single-upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"排序：\">\r\n        <el-input v-model=\"homeAdvertise.sort\" class=\"input-width\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"广告链接：\" prop=\"url\">\r\n        <el-input v-model=\"homeAdvertise.url\" class=\"input-width\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"广告备注：\">\r\n        <el-input\r\n          class=\"input-width\"\r\n          type=\"textarea\"\r\n          :rows=\"5\"\r\n          placeholder=\"请输入内容\"\r\n          v-model=\"homeAdvertise.note\"\r\n        >\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"onSubmit('homeAdvertiseFrom')\"\r\n          >提交</el-button\r\n        >\r\n        <el-button v-if=\"!isEdit\" @click=\"resetForm('homeAdvertiseFrom')\"\r\n          >重置</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-card>\r\n</template>\r\n<script>\r\nimport SingleUpload from '@/components/Upload/singleUpload'\r\nimport {\r\n  createHomeAdvertise,\r\n  getHomeAdvertise,\r\n  updateHomeAdvertise,\r\n} from '@/api/homeAdvertise'\r\nconst defaultTypeOptions = [\r\n  {\r\n    label: 'PC首页轮播',\r\n    value: 0,\r\n  },\r\n  {\r\n    label: 'APP首页轮播',\r\n    value: 1,\r\n  },\r\n]\r\nconst defaultHomeAdvertise = {\r\n  name: null,\r\n  type: 1,\r\n  pic: null,\r\n  startTime: null,\r\n  endTime: null,\r\n  status: 0,\r\n  url: null,\r\n  note: null,\r\n  sort: 0,\r\n}\r\nexport default {\r\n  components: { SingleUpload },\r\n  props: {\r\n    isEdit: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      homeAdvertise: null,\r\n      rules: {\r\n        name: [\r\n          { required: true, message: '请输入广告名称', trigger: 'blur' },\r\n          {\r\n            min: 2,\r\n            max: 140,\r\n            message: '长度在 2 到 140 个字符',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n        url: [{ required: true, message: '请输入广告链接', trigger: 'blur' }],\r\n        startTime: [\r\n          { required: true, message: '请选择开始时间', trigger: 'blur' },\r\n        ],\r\n        endTime: [\r\n          { required: true, message: '请选择到期时间', trigger: 'blur' },\r\n        ],\r\n        pic: [{ required: true, message: '请选择广告图片', trigger: 'blur' }],\r\n      },\r\n      typeOptions: Object.assign({}, defaultTypeOptions),\r\n    }\r\n  },\r\n  created() {\r\n    if (this.isEdit) {\r\n      getHomeAdvertise(this.$route.query.id).then((response) => {\r\n        this.homeAdvertise = response.data\r\n      })\r\n    } else {\r\n      this.homeAdvertise = Object.assign({}, defaultHomeAdvertise)\r\n    }\r\n  },\r\n  methods: {\r\n    onSubmit(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.$confirm('是否提交数据', '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning',\r\n          }).then(() => {\r\n            if (this.isEdit) {\r\n              updateHomeAdvertise(\r\n                this.$route.query.id,\r\n                this.homeAdvertise,\r\n              ).then((response) => {\r\n                this.$refs[formName].resetFields()\r\n                this.$message({\r\n                  message: '修改成功',\r\n                  type: 'success',\r\n                  duration: 1000,\r\n                })\r\n                this.$router.back()\r\n              })\r\n            } else {\r\n              createHomeAdvertise(this.homeAdvertise).then((response) => {\r\n                this.$refs[formName].resetFields()\r\n                this.homeAdvertise = Object.assign({}, defaultHomeAdvertise)\r\n                this.$message({\r\n                  message: '提交成功',\r\n                  type: 'success',\r\n                  duration: 1000,\r\n                })\r\n              })\r\n            }\r\n          })\r\n        } else {\r\n          this.$message({\r\n            message: '验证失败',\r\n            type: 'error',\r\n            duration: 1000,\r\n          })\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields()\r\n      this.homeAdvertise = Object.assign({}, defaultHomeAdvertise)\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped>\r\n.input-width {\r\n  width: 70%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomeAdvertiseDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomeAdvertiseDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HomeAdvertiseDetail.vue?vue&type=template&id=26a8e211&scoped=true&\"\nimport script from \"./HomeAdvertiseDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./HomeAdvertiseDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HomeAdvertiseDetail.vue?vue&type=style&index=0&id=26a8e211&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26a8e211\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomeAdvertiseDetail.vue?vue&type=style&index=0&id=26a8e211&scoped=true&lang=css&\"","import request from '@/utils/request'\r\n\r\n// 上传图片\r\nexport function policy() {\r\n  return request({\r\n    url: '/aliyun/oss/policy',\r\n    method: 'get',\r\n  })\r\n}","import request from '@/utils/request'\r\nexport function fetchList(params) {\r\n  return request({\r\n    url:'/home/advertise/list',\r\n    method:'get',\r\n    params:params\r\n  })\r\n}\r\nexport function updateStatus(id,params) {\r\n  return request({\r\n    url:'/home/advertise/update/status/'+id,\r\n    method:'post',\r\n    params:params\r\n  })\r\n}\r\nexport function deleteHomeAdvertise(data) {\r\n  return request({\r\n    url:'/home/advertise/delete',\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\nexport function createHomeAdvertise(data) {\r\n  return request({\r\n    url:'/home/advertise/create',\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\nexport function getHomeAdvertise(id) {\r\n  return request({\r\n    url:'/home/advertise/'+id,\r\n    method:'get',\r\n  })\r\n}\r\n\r\nexport function updateHomeAdvertise(id,data) {\r\n  return request({\r\n    url:'/home/advertise/update/'+id,\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('home-advertise-detail',{attrs:{\"isEdit\":true}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <home-advertise-detail :isEdit=\"true\"></home-advertise-detail>\r\n</template>\r\n<script>\r\nimport HomeAdvertiseDetail from './components/HomeAdvertiseDetail'\r\nexport default {\r\n  name: 'updateHomeAdvertise',\r\n  components: { HomeAdvertiseDetail },\r\n}\r\n</script>\r\n<style></style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./update.vue?vue&type=template&id=8db6e4e0&\"\nimport script from \"./update.vue?vue&type=script&lang=js&\"\nexport * from \"./update.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}