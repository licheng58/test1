{"version":3,"sources":["webpack:///./src/components/Upload/singleUpload.vue?db03","webpack:///src/components/Upload/singleUpload.vue","webpack:///./src/components/Upload/singleUpload.vue?3b96","webpack:///./src/components/Upload/singleUpload.vue","webpack:///./src/views/pro/productCate/add.vue?63ec","webpack:///src/views/pro/productCate/add.vue","webpack:///./src/views/pro/productCate/add.vue?78b7","webpack:///./src/views/pro/productCate/add.vue","webpack:///./src/api/productAttrCate.js","webpack:///./src/api/oss.js","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/api/productAttr.js","webpack:///./src/api/productCate.js","webpack:///./src/views/pro/productCate/components/ProductCateDetail.vue?c698","webpack:///src/views/pro/productCate/components/ProductCateDetail.vue","webpack:///./src/views/pro/productCate/components/ProductCateDetail.vue?31b2","webpack:///./src/views/pro/productCate/components/ProductCateDetail.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","useOss","ossUploadUrl","minioUploadUrl","dataObj","showFileList","fileList","beforeUpload","handleRemove","handleUploadSuccess","handlePreview","_v","staticClass","slot","dialogVisible","on","$event","url","staticRenderFns","component","components","fetchList","params","request","method","createProductAttrCate","data","deleteProductAttrCate","id","updateProductAttrCate","fetchListWithAttr","policy","$","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","length","actualStart","argumentsLength","arguments","TypeError","cid","deleteProductAttr","createProductAttr","updateProductAttr","getProductAttr","getProductAttrInfo","productCategoryId","parentId","deleteProductCate","createProductCate","updateProductCate","getProductCate","updateShowStatus","updateNavStatus","fetchListWithChildren","ref","productCate","rules","model","value","callback","$$v","$set","expression","_l","item","key","name","filterProductAttr","index","_f","filterAttrs","staticStyle","preventDefault","removeFilterAttr","handleAddFilterAttr","onSubmit","isEdit","_e","resetForm"],"mappings":"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","file":"js/chunk-fe83559a.1689681f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{attrs:{\"action\":_vm.useOss?_vm.ossUploadUrl:_vm.minioUploadUrl,\"data\":_vm.useOss?_vm.dataObj:null,\"list-type\":\"picture\",\"multiple\":false,\"show-file-list\":_vm.showFileList,\"file-list\":_vm.fileList,\"before-upload\":_vm.beforeUpload,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.handleUploadSuccess,\"on-preview\":_vm.handlePreview}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过10MB\")])],1),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.fileList[0].url,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template> \r\n  <div>\r\n    <el-upload\r\n      :action=\"useOss?ossUploadUrl:minioUploadUrl\"\r\n      :data=\"useOss?dataObj:null\"\r\n      list-type=\"picture\"\r\n      :multiple=\"false\" :show-file-list=\"showFileList\"\r\n      :file-list=\"fileList\"\r\n      :before-upload=\"beforeUpload\"\r\n      :on-remove=\"handleRemove\"\r\n      :on-success=\"handleUploadSuccess\"\r\n      :on-preview=\"handlePreview\">\r\n      <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n      <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过10MB</div>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\">\r\n      <img width=\"100%\" :src=\"fileList[0].url\" alt=\"\">\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {policy} from '@/api/oss'\r\n\r\n  export default {\r\n    name: 'singleUpload',\r\n    props: {\r\n      value: String\r\n    },\r\n    computed: {\r\n      imageUrl() {\r\n        return this.value;\r\n      },\r\n      imageName() {\r\n        if (this.value != null && this.value !== '') {\r\n          return this.value.substr(this.value.lastIndexOf(\"/\") + 1);\r\n        } else {\r\n          return null;\r\n        }\r\n      },\r\n      fileList() {\r\n        return [{\r\n          name: this.imageName,\r\n          url: this.imageUrl\r\n        }]\r\n      },\r\n      showFileList: {\r\n        get: function () {\r\n          return this.value !== null && this.value !== ''&& this.value!==undefined;\r\n        },\r\n        set: function (newValue) {\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        dataObj: {\r\n          policy: '',\r\n          signature: '',\r\n          key: '',\r\n          ossaccessKeyId: '',\r\n          dir: '',\r\n          host: '',\r\n          // callback:'',\r\n        },\r\n        dialogVisible: false,\r\n        useOss:true, //使用oss->true;使用MinIO->false\r\n        ossUploadUrl:'http://macro-oss.oss-cn-shenzhen.aliyuncs.com',\r\n        minioUploadUrl:'http://localhost:8080/minio/upload',\r\n      };\r\n    },\r\n    methods: {\r\n      emitInput(val) {\r\n        this.$emit('input', val)\r\n      },\r\n      handleRemove(file, fileList) {\r\n        this.emitInput('');\r\n      },\r\n      handlePreview(file) {\r\n        this.dialogVisible = true;\r\n      },\r\n      beforeUpload(file) {\r\n        let _self = this;\r\n        if(!this.useOss){\r\n          //不使用oss不需要获取策略\r\n          return true;\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n          policy().then(response => {\r\n            _self.dataObj.policy = response.data.policy;\r\n            _self.dataObj.signature = response.data.signature;\r\n            _self.dataObj.ossaccessKeyId = response.data.accessKeyId;\r\n            _self.dataObj.key = response.data.dir + '/${filename}';\r\n            _self.dataObj.dir = response.data.dir;\r\n            _self.dataObj.host = response.data.host;\r\n            // _self.dataObj.callback = response.data.callback;\r\n            resolve(true)\r\n          }).catch(err => {\r\n            console.log(err)\r\n            reject(false)\r\n          })\r\n        })\r\n      },\r\n      handleUploadSuccess(res, file) {\r\n        this.showFileList = true;\r\n        this.fileList.pop();\r\n        let url = this.dataObj.host + '/' + this.dataObj.dir + '/' + file.name;\r\n        if(!this.useOss){\r\n          //不使用oss直接获取图片路径\r\n          url = res.data.url;\r\n        }\r\n        this.fileList.push({name: file.name, url: url});\r\n        this.emitInput(this.fileList[0].url);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singleUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./singleUpload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./singleUpload.vue?vue&type=template&id=5a82ff78&\"\nimport script from \"./singleUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./singleUpload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('product-cate-detail',{attrs:{\"is-edit\":false}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <product-cate-detail :is-edit=\"false\"></product-cate-detail>\r\n</template>\r\n<script>\r\nimport ProductCateDetail from './components/ProductCateDetail'\r\nexport default {\r\n  // name: 'addProductCate',\r\n  components: { ProductCateDetail },\r\n}\r\n</script>\r\n<style></style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=4d76b41a&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\nexport function fetchList(params) {\r\n  return request({\r\n    url:'/productAttribute/category/list',\r\n    method:'get',\r\n    params:params\r\n  })\r\n}\r\n\r\nexport function createProductAttrCate(data) {\r\n  return request({\r\n    url:'/productAttribute/category/create',\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\n\r\nexport function deleteProductAttrCate(id) {\r\n  return request({\r\n    url:'/productAttribute/category/delete/'+id,\r\n    method:'get'\r\n  })\r\n}\r\n\r\nexport function updateProductAttrCate(id,data) {\r\n  return request({\r\n    url:'/productAttribute/category/update/'+id,\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\nexport function fetchListWithAttr() {\r\n  return request({\r\n    url:'/productAttribute/category/list/withAttr',\r\n    method:'get'\r\n  })\r\n}\r\n","import request from '@/utils/request'\r\n\r\n// 上传图片\r\nexport function policy() {\r\n  return request({\r\n    url: '/aliyun/oss/policy',\r\n    method: 'get',\r\n  })\r\n}","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","import request from '@/utils/request'\r\nexport function fetchList(cid,params) {\r\n  return request({\r\n    url:'/productAttribute/list/'+cid,\r\n    method:'get',\r\n    params:params\r\n  })\r\n}\r\n\r\nexport function deleteProductAttr(data) {\r\n  return request({\r\n    url:'/productAttribute/delete',\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\n\r\nexport function createProductAttr(data) {\r\n  return request({\r\n    url:'/productAttribute/create',\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\n\r\nexport function updateProductAttr(id,data) {\r\n  return request({\r\n    url:'/productAttribute/update/'+id,\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\nexport function getProductAttr(id) {\r\n  return request({\r\n    url:'/productAttribute/'+id,\r\n    method:'get'\r\n  })\r\n}\r\n\r\nexport function getProductAttrInfo(productCategoryId) {\r\n  return request({\r\n    url:'/productAttribute/attrInfo/'+productCategoryId,\r\n    method:'get'\r\n  })\r\n}\r\n","import request from '@/utils/request'\r\nexport function fetchList(parentId,params) {\r\n  return request({\r\n    url:'/productCategory/list/'+parentId,\r\n    method:'get',\r\n    params:params\r\n  })\r\n}\r\nexport function deleteProductCate(id) {\r\n  return request({\r\n    url:'/productCategory/delete/'+id,\r\n    method:'post'\r\n  })\r\n}\r\n\r\nexport function createProductCate(data) {\r\n  return request({\r\n    url:'/productCategory/create',\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\n\r\nexport function updateProductCate(id,data) {\r\n  return request({\r\n    url:'/productCategory/update/'+id,\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\n\r\nexport function getProductCate(id) {\r\n  return request({\r\n    url:'/productCategory/'+id,\r\n    method:'get',\r\n  })\r\n}\r\n\r\nexport function updateShowStatus(data) {\r\n  return request({\r\n    url:'/productCategory/update/showStatus',\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\n\r\nexport function updateNavStatus(data) {\r\n  return request({\r\n    url:'/productCategory/update/navStatus',\r\n    method:'post',\r\n    data:data\r\n  })\r\n}\r\n\r\nexport function fetchListWithChildren() {\r\n  return request({\r\n    url:'/productCategory/list/withChildren',\r\n    method:'get'\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"form-container\",attrs:{\"shadow\":\"never\"}},[_c('el-form',{ref:\"productCateFrom\",attrs:{\"model\":_vm.productCate,\"rules\":_vm.rules,\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称：\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.productCate.name),callback:function ($$v) {_vm.$set(_vm.productCate, \"name\", $$v)},expression:\"productCate.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"上级分类：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择分类\"},model:{value:(_vm.productCate.parentId),callback:function ($$v) {_vm.$set(_vm.productCate, \"parentId\", $$v)},expression:\"productCate.parentId\"}},_vm._l((_vm.selectProductCateList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"数量单位：\"}},[_c('el-input',{model:{value:(_vm.productCate.productUnit),callback:function ($$v) {_vm.$set(_vm.productCate, \"productUnit\", $$v)},expression:\"productCate.productUnit\"}})],1),_c('el-form-item',{attrs:{\"label\":\"排序：\"}},[_c('el-input',{model:{value:(_vm.productCate.sort),callback:function ($$v) {_vm.$set(_vm.productCate, \"sort\", $$v)},expression:\"productCate.sort\"}})],1),_c('el-form-item',{attrs:{\"label\":\"是否显示：\"}},[_c('el-radio-group',{model:{value:(_vm.productCate.showStatus),callback:function ($$v) {_vm.$set(_vm.productCate, \"showStatus\", $$v)},expression:\"productCate.showStatus\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"是\")]),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"否\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"是否显示在导航栏：\"}},[_c('el-radio-group',{model:{value:(_vm.productCate.navStatus),callback:function ($$v) {_vm.$set(_vm.productCate, \"navStatus\", $$v)},expression:\"productCate.navStatus\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"是\")]),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"否\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"分类图标：\"}},[_c('single-upload',{model:{value:(_vm.productCate.icon),callback:function ($$v) {_vm.$set(_vm.productCate, \"icon\", $$v)},expression:\"productCate.icon\"}})],1),_vm._l((_vm.filterProductAttrList),function(filterProductAttr,index){return _c('el-form-item',{key:filterProductAttr.key,attrs:{\"label\":_vm._f(\"filterLabelFilter\")(index)}},[_c('el-cascader',{attrs:{\"clearable\":\"\",\"options\":_vm.filterAttrs},model:{value:(filterProductAttr.value),callback:function ($$v) {_vm.$set(filterProductAttr, \"value\", $$v)},expression:\"filterProductAttr.value\"}}),_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},on:{\"click\":function($event){$event.preventDefault();return _vm.removeFilterAttr(filterProductAttr)}}},[_vm._v(\"删除\")])],1)}),_c('el-form-item',[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleAddFilterAttr()}}},[_vm._v(\"新增\")])],1),_c('el-form-item',{attrs:{\"label\":\"关键词：\"}},[_c('el-input',{model:{value:(_vm.productCate.keywords),callback:function ($$v) {_vm.$set(_vm.productCate, \"keywords\", $$v)},expression:\"productCate.keywords\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分类描述：\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":true},model:{value:(_vm.productCate.description),callback:function ($$v) {_vm.$set(_vm.productCate, \"description\", $$v)},expression:\"productCate.description\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit('productCateFrom')}}},[_vm._v(\"提交\")]),(!_vm.isEdit)?_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('productCateFrom')}}},[_vm._v(\"重置\")]):_vm._e()],1)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-card class=\"form-container\" shadow=\"never\">\r\n    <el-form :model=\"productCate\"\r\n             :rules=\"rules\"\r\n             ref=\"productCateFrom\"\r\n             label-width=\"150px\">\r\n      <el-form-item label=\"分类名称：\" prop=\"name\">\r\n        <el-input v-model=\"productCate.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"上级分类：\">\r\n        <el-select v-model=\"productCate.parentId\"\r\n                   placeholder=\"请选择分类\">\r\n          <el-option\r\n            v-for=\"item in selectProductCateList\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"数量单位：\">\r\n        <el-input v-model=\"productCate.productUnit\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"排序：\">\r\n        <el-input v-model=\"productCate.sort\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"是否显示：\">\r\n        <el-radio-group v-model=\"productCate.showStatus\">\r\n          <el-radio :label=\"1\">是</el-radio>\r\n          <el-radio :label=\"0\">否</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"是否显示在导航栏：\">\r\n        <el-radio-group v-model=\"productCate.navStatus\">\r\n          <el-radio :label=\"1\">是</el-radio>\r\n          <el-radio :label=\"0\">否</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"分类图标：\">\r\n        <single-upload v-model=\"productCate.icon\"></single-upload>\r\n      </el-form-item>\r\n      <el-form-item v-for=\"(filterProductAttr, index) in filterProductAttrList\"\r\n                    :label=\"index | filterLabelFilter\"\r\n                    :key=\"filterProductAttr.key\"\r\n      >\r\n        <el-cascader\r\n          clearable\r\n          v-model=\"filterProductAttr.value\"\r\n          :options=\"filterAttrs\">\r\n        </el-cascader>\r\n        <el-button style=\"margin-left: 20px\" @click.prevent=\"removeFilterAttr(filterProductAttr)\">删除</el-button>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button size=\"small\" type=\"primary\" @click=\"handleAddFilterAttr()\">新增</el-button>\r\n      </el-form-item>\r\n      <el-form-item label=\"关键词：\">\r\n        <el-input v-model=\"productCate.keywords\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"分类描述：\">\r\n        <el-input type=\"textarea\" :autosize=\"true\" v-model=\"productCate.description\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"onSubmit('productCateFrom')\">提交</el-button>\r\n        <el-button v-if=\"!isEdit\" @click=\"resetForm('productCateFrom')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\n  import {fetchList, createProductCate, updateProductCate, getProductCate} from '@/api/productCate';\r\n  import {fetchListWithAttr} from '@/api/productAttrCate';\r\n  import {getProductAttrInfo} from '@/api/productAttr';\r\n  import SingleUpload from '@/components/Upload/singleUpload';\r\n\r\n  const defaultProductCate = {\r\n    description: '',\r\n    icon: '',\r\n    keywords: '',\r\n    name: '',\r\n    navStatus: 0,\r\n    parentId: 0,\r\n    productUnit: '',\r\n    showStatus: 0,\r\n    sort: 0,\r\n    productAttributeIdList: []\r\n  };\r\n  export default {\r\n    name: \"ProductCateDetail\",\r\n    components: {SingleUpload},\r\n    props: {\r\n      isEdit: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        productCate: Object.assign({}, defaultProductCate),\r\n        selectProductCateList: [],\r\n        rules: {\r\n          name: [\r\n            {required: true, message: '请输入品牌名称', trigger: 'blur'},\r\n            {min: 2, max: 140, message: '长度在 2 到 140 个字符', trigger: 'blur'}\r\n          ]\r\n        },\r\n        filterAttrs: [],\r\n        filterProductAttrList: [{\r\n          value: []\r\n        }]\r\n      }\r\n    },\r\n    created() {\r\n      if (this.isEdit) {\r\n        getProductCate(this.$route.query.id).then(response => {\r\n          this.productCate = response.data;\r\n        });\r\n        getProductAttrInfo(this.$route.query.id).then(response => {\r\n          if (response.data != null && response.data.length > 0) {\r\n            this.filterProductAttrList = [];\r\n            for (let i = 0; i < response.data.length; i++) {\r\n              this.filterProductAttrList.push({\r\n                key: Date.now() + i,\r\n                value: [response.data[i].attributeCategoryId, response.data[i].attributeId]\r\n              })\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        this.productCate = Object.assign({}, defaultProductCate);\r\n      }\r\n      this.getSelectProductCateList();\r\n      this.getProductAttrCateList();\r\n    },\r\n    methods: {\r\n      getSelectProductCateList() {\r\n        fetchList(0, {pageSize: 100, pageNum: 1}).then(response => {\r\n          this.selectProductCateList = response.data.list;\r\n          this.selectProductCateList.unshift({id: 0, name: '无上级分类'});\r\n        });\r\n      },\r\n      getProductAttrCateList() {\r\n        fetchListWithAttr().then(response => {\r\n          let list = response.data;\r\n          for (let i = 0; i < list.length; i++) {\r\n            let productAttrCate = list[i];\r\n            let children = [];\r\n            if (productAttrCate.productAttributeList != null && productAttrCate.productAttributeList.length > 0) {\r\n              for (let j = 0; j < productAttrCate.productAttributeList.length; j++) {\r\n                children.push({\r\n                  label: productAttrCate.productAttributeList[j].name,\r\n                  value: productAttrCate.productAttributeList[j].id\r\n                })\r\n              }\r\n            }\r\n            this.filterAttrs.push({label: productAttrCate.name, value: productAttrCate.id, children: children});\r\n          }\r\n        });\r\n      },\r\n      getProductAttributeIdList() {\r\n        //获取选中的筛选商品属性\r\n        let productAttributeIdList = [];\r\n        for (let i = 0; i < this.filterProductAttrList.length; i++) {\r\n          let item = this.filterProductAttrList[i];\r\n          if (item.value !== null && item.value.length === 2) {\r\n            productAttributeIdList.push(item.value[1]);\r\n          }\r\n        }\r\n        return productAttributeIdList;\r\n      },\r\n      onSubmit(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.$confirm('是否提交数据', '提示', {\r\n              confirmButtonText: '确定',\r\n              cancelButtonText: '取消',\r\n              type: 'warning'\r\n            }).then(() => {\r\n              if (this.isEdit) {\r\n                this.productCate.productAttributeIdList = this.getProductAttributeIdList();\r\n                updateProductCate(this.$route.query.id, this.productCate).then(response => {\r\n                  this.$message({\r\n                    message: '修改成功',\r\n                    type: 'success',\r\n                    duration: 1000\r\n                  });\r\n                  this.$router.back();\r\n                });\r\n              } else {\r\n                this.productCate.productAttributeIdList = this.getProductAttributeIdList();\r\n                createProductCate(this.productCate).then(response => {\r\n                  this.$refs[formName].resetFields();\r\n                  this.resetForm(formName);\r\n                  this.$message({\r\n                    message: '提交成功',\r\n                    type: 'success',\r\n                    duration: 1000\r\n                  });\r\n                });\r\n              }\r\n            });\r\n\r\n          } else {\r\n            this.$message({\r\n              message: '验证失败',\r\n              type: 'error',\r\n              duration: 1000\r\n            });\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n        this.productCate = Object.assign({}, defaultProductCate);\r\n        this.getSelectProductCateList();\r\n        this.filterProductAttrList = [{\r\n          value: []\r\n        }];\r\n      },\r\n      removeFilterAttr(productAttributeId) {\r\n        if (this.filterProductAttrList.length === 1) {\r\n          this.$message({\r\n            message: '至少要留一个',\r\n            type: 'warning',\r\n            duration: 1000\r\n          });\r\n          return;\r\n        }\r\n        var index = this.filterProductAttrList.indexOf(productAttributeId);\r\n        if (index !== -1) {\r\n          this.filterProductAttrList.splice(index, 1)\r\n        }\r\n      },\r\n      handleAddFilterAttr() {\r\n        if (this.filterProductAttrList.length === 3) {\r\n          this.$message({\r\n            message: '最多添加三个',\r\n            type: 'warning',\r\n            duration: 1000\r\n          });\r\n          return;\r\n        }\r\n        this.filterProductAttrList.push({\r\n          value: null,\r\n          key: Date.now()\r\n        });\r\n      }\r\n    },\r\n    filters: {\r\n      filterLabelFilter(index) {\r\n        if (index === 0) {\r\n          return '筛选属性：';\r\n        } else {\r\n          return '';\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductCateDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductCateDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProductCateDetail.vue?vue&type=template&id=219accc6&scoped=true&\"\nimport script from \"./ProductCateDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./ProductCateDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"219accc6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}