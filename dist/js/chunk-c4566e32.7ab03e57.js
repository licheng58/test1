(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4566e32"],{"0f39":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-upload",{attrs:{action:t.useOss?t.ossUploadUrl:t.minioUploadUrl,data:t.useOss?t.dataObj:null,"list-type":"picture",multiple:!1,"show-file-list":t.showFileList,"file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview}},[r("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过10MB")])],1),r("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("img",{attrs:{width:"100%",src:t.fileList[0].url,alt:""}})])],1)},i=[],n=(r("d3b7"),r("b0c0"),r("6e0d")),l={name:"singleUpload",props:{value:String},computed:{imageUrl:function(){return this.value},imageName:function(){return null!=this.value&&""!==this.value?this.value.substr(this.value.lastIndexOf("/")+1):null},fileList:function(){return[{name:this.imageName,url:this.imageUrl}]},showFileList:{get:function(){return null!==this.value&&""!==this.value&&void 0!==this.value},set:function(t){}}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1,useOss:!0,ossUploadUrl:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com",minioUploadUrl:"http://localhost:8080/minio/upload"}},methods:{emitInput:function(t){this.$emit("input",t)},handleRemove:function(t,e){this.emitInput("")},handlePreview:function(t){this.dialogVisible=!0},beforeUpload:function(t){var e=this;return!this.useOss||new Promise((function(t,r){Object(n["a"])().then((function(r){e.dataObj.policy=r.data.policy,e.dataObj.signature=r.data.signature,e.dataObj.ossaccessKeyId=r.data.accessKeyId,e.dataObj.key=r.data.dir+"/${filename}",e.dataObj.dir=r.data.dir,e.dataObj.host=r.data.host,t(!0)})).catch((function(t){console.log(t),r(!1)}))}))},handleUploadSuccess:function(t,e){this.showFileList=!0,this.fileList.pop();var r=this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name;this.useOss||(r=t.data.url),this.fileList.push({name:e.name,url:r}),this.emitInput(this.fileList[0].url)}}},u=l,o=r("2877"),s=Object(o["a"])(u,a,i,!1,null,null,null);e["a"]=s.exports},1276:function(t,e,r){"use strict";var a=r("d784"),i=r("44e7"),n=r("825a"),l=r("1d80"),u=r("4840"),o=r("8aa5"),s=r("50c4"),c=r("14c3"),d=r("9263"),p=r("d039"),f=[].push,h=Math.min,v=4294967295,m=!p((function(){return!RegExp(v,"y")}));a("split",2,(function(t,e,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var a=String(l(this)),n=void 0===r?v:r>>>0;if(0===n)return[];if(void 0===t)return[a];if(!i(t))return e.call(a,t,n);var u,o,s,c=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,m=new RegExp(t.source,p+"g");while(u=d.call(m,a)){if(o=m.lastIndex,o>h&&(c.push(a.slice(h,u.index)),u.length>1&&u.index<a.length&&f.apply(c,u.slice(1)),s=u[0].length,h=o,c.length>=n))break;m.lastIndex===u.index&&m.lastIndex++}return h===a.length?!s&&m.test("")||c.push(""):c.push(a.slice(h)),c.length>n?c.slice(0,n):c}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var i=l(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,i,r):a.call(String(i),e,r)},function(t,i){var l=r(a,t,this,i,a!==e);if(l.done)return l.value;var d=n(t),p=String(this),f=u(d,RegExp),b=d.unicode,g=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(m?"y":"g"),P=new f(m?d:"^(?:"+d.source+")",g),k=void 0===i?v:i>>>0;if(0===k)return[];if(0===p.length)return null===c(P,p)?[p]:[];var y=0,x=0,S=[];while(x<p.length){P.lastIndex=m?x:0;var w,A=c(P,m?p:p.slice(x));if(null===A||(w=h(s(P.lastIndex+(m?0:x)),p.length))===y)x=o(p,x,b);else{if(S.push(p.slice(y,x)),S.length===k)return S;for(var O=1;O<=A.length-1;O++)if(S.push(A[O]),S.length===k)return S;x=y=w}}return S.push(p.slice(y)),S}]}),!m)},"14c3":function(t,e,r){var a=r("c6b6"),i=r("9263");t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var n=r.call(t,e);if("object"!==typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==a(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},1560:function(t,e,r){"use strict";r("33bd")},"33bd":function(t,e,r){},"3b1d":function(t,e,r){"use strict";r("8cd2")},"44e7":function(t,e,r){var a=r("861d"),i=r("c6b6"),n=r("b622"),l=n("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[l])?!!e:"RegExp"==i(t))}},"4e11":function(t,e,r){},"545b":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[r("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"填写商品信息"}}),r("el-step",{attrs:{title:"填写商品促销"}}),r("el-step",{attrs:{title:"填写商品属性"}}),r("el-step",{attrs:{title:"选择商品关联"}})],1),r("product-info-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[0],expression:"showStatus[0]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),r("product-sale-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[1],expression:"showStatus[1]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),r("product-attr-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[2],expression:"showStatus[2]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),r("product-relation-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[3],expression:"showStatus[3]"}],attrs:{"is-edit":t.isEdit},on:{prevStep:t.prevStep,finishCommit:t.finishCommit},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}})],1)},i=[],n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"margin-top":"50px"}},[r("el-form",{ref:"productInfoForm",staticStyle:{width:"600px"},attrs:{model:t.value,rules:t.rules,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"商品分类：",prop:"productCategoryId"}},[r("el-cascader",{attrs:{options:t.productCateOptions},model:{value:t.selectProductCateValue,callback:function(e){t.selectProductCateValue=e},expression:"selectProductCateValue"}})],1),r("el-form-item",{attrs:{label:"商品名称：",prop:"name"}},[r("el-input",{model:{value:t.value.name,callback:function(e){t.$set(t.value,"name",e)},expression:"value.name"}})],1),r("el-form-item",{attrs:{label:"副标题：",prop:"subTitle"}},[r("el-input",{model:{value:t.value.subTitle,callback:function(e){t.$set(t.value,"subTitle",e)},expression:"value.subTitle"}})],1),r("el-form-item",{attrs:{label:"商品品牌：",prop:"brandId"}},[r("el-select",{attrs:{placeholder:"请选择品牌"},on:{change:t.handleBrandChange},model:{value:t.value.brandId,callback:function(e){t.$set(t.value,"brandId",e)},expression:"value.brandId"}},t._l(t.brandOptions,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),r("el-form-item",{attrs:{label:"商品介绍："}},[r("el-input",{attrs:{autoSize:!0,placeholder:"请输入内容",type:"textarea"},model:{value:t.value.description,callback:function(e){t.$set(t.value,"description",e)},expression:"value.description"}})],1),r("el-form-item",{attrs:{label:"商品货号："}},[r("el-input",{model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),r("el-form-item",{attrs:{label:"商品售价："}},[r("el-input",{model:{value:t.value.price,callback:function(e){t.$set(t.value,"price",e)},expression:"value.price"}})],1),r("el-form-item",{attrs:{label:"市场价："}},[r("el-input",{model:{value:t.value.originalPrice,callback:function(e){t.$set(t.value,"originalPrice",e)},expression:"value.originalPrice"}})],1),r("el-form-item",{attrs:{label:"商品库存："}},[r("el-input",{model:{value:t.value.stock,callback:function(e){t.$set(t.value,"stock",e)},expression:"value.stock"}})],1),r("el-form-item",{attrs:{label:"计量单位："}},[r("el-input",{model:{value:t.value.unit,callback:function(e){t.$set(t.value,"unit",e)},expression:"value.unit"}})],1),r("el-form-item",{attrs:{label:"商品重量："}},[r("el-input",{staticStyle:{width:"300px"},model:{value:t.value.weight,callback:function(e){t.$set(t.value,"weight",e)},expression:"value.weight"}}),r("span",{staticStyle:{"margin-left":"20px"}},[t._v("克")])],1),r("el-form-item",{attrs:{label:"排序"}},[r("el-input",{model:{value:t.value.sort,callback:function(e){t.$set(t.value,"sort",e)},expression:"value.sort"}})],1),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.handleNext("productInfoForm")}}},[t._v("下一步，填写商品促销")])],1)],1)],1)},l=[],u=(r("b0c0"),r("d1f3")),o=r("9add"),s=r("c4c8"),c={name:"ProductInfoDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,selectProductCateValue:[],productCateOptions:[],brandOptions:[],rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],subTitle:[{required:!0,message:"请输入商品副标题",trigger:"blur"}],productCategoryId:[{required:!0,message:"请选择商品分类",trigger:"blur"}],brandId:[{required:!0,message:"请选择商品品牌",trigger:"blur"}],description:[{required:!0,message:"请输入商品介绍",trigger:"blur"}],requiredProp:[{required:!0,message:"该项为必填项",trigger:"blur"}]}}},created:function(){this.getProductCateList(),this.getBrandList()},computed:{productId:function(){return this.value.id}},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())},selectProductCateValue:function(t){null!=t&&2===t.length?(this.value.productCategoryId=t[1],this.value.productCategoryName=this.getCateNameById(this.value.productCategoryId)):(this.value.productCategoryId=null,this.value.productCategoryName=null)}},methods:{handleEditCreated:function(){null!=this.value.productCategoryId&&(this.selectProductCateValue.push(this.value.cateParentId),this.selectProductCateValue.push(this.value.productCategoryId)),this.hasEditCreated=!0},getProductCateList:function(){var t=this;Object(u["d"])().then((function(e){var r=e.data;t.productCateOptions=[];for(var a=0;a<r.length;a++){var i=[];if(null!=r[a].children&&r[a].children.length>0)for(var n=0;n<r[a].children.length;n++)i.push({label:r[a].children[n].name,value:r[a].children[n].id});t.productCateOptions.push({label:r[a].name,value:r[a].id,children:i})}}))},getBrandList:function(){var t=this;Object(o["c"])({pageNum:1,pageSize:100}).then((function(e){t.brandOptions=[];for(var r=e.data.list,a=0;a<r.length;a++)t.brandOptions.push({label:r[a].name,value:r[a].id})}))},getCateNameById:function(t){for(var e=null,r=0;r<this.productCateOptions.length;r++)for(var a=0;a<this.productCateOptions[r].children.length;a++)if(this.productCateOptions[r].children[a].value===t)return e=this.productCateOptions[r].children[a].label,e;return e},handleNext:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return e.$message({message:"验证失败",type:"error",duration:1e3}),!1;e.$emit("nextStep")}))},handleBrandChange:function(t){for(var e="",r=0;r<this.brandOptions.length;r++)if(this.brandOptions[r].value===t){e=this.brandOptions[r].label;break}this.value.brandName=e}}},d=c,p=r("2877"),f=Object(p["a"])(d,n,l,!1,null,"cf9ab9f2",null),h=f.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"margin-top":"50px"}},[r("el-form",{ref:"productSaleForm",staticStyle:{width:"600px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"赠送积分："}},[r("el-input",{model:{value:t.value.giftPoint,callback:function(e){t.$set(t.value,"giftPoint",e)},expression:"value.giftPoint"}})],1),r("el-form-item",{attrs:{label:"赠送成长值："}},[r("el-input",{model:{value:t.value.giftGrowth,callback:function(e){t.$set(t.value,"giftGrowth",e)},expression:"value.giftGrowth"}})],1),r("el-form-item",{attrs:{label:"积分购买限制："}},[r("el-input",{model:{value:t.value.usePointLimit,callback:function(e){t.$set(t.value,"usePointLimit",e)},expression:"value.usePointLimit"}})],1),r("el-form-item",{attrs:{label:"预告商品："}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.previewStatus,callback:function(e){t.$set(t.value,"previewStatus",e)},expression:"value.previewStatus"}})],1),r("el-form-item",{attrs:{label:"商品上架："}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.publishStatus,callback:function(e){t.$set(t.value,"publishStatus",e)},expression:"value.publishStatus"}})],1),r("el-form-item",{attrs:{label:"商品推荐："}},[r("span",{staticStyle:{"margin-right":"10px"}},[t._v("新品")]),r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.newStatus,callback:function(e){t.$set(t.value,"newStatus",e)},expression:"value.newStatus"}}),r("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[t._v("推荐")]),r("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.recommandStatus,callback:function(e){t.$set(t.value,"recommandStatus",e)},expression:"value.recommandStatus"}})],1),r("el-form-item",{attrs:{label:"服务保证："}},[r("el-checkbox-group",{model:{value:t.selectServiceList,callback:function(e){t.selectServiceList=e},expression:"selectServiceList"}},[r("el-checkbox",{attrs:{label:1}},[t._v("无忧退货")]),r("el-checkbox",{attrs:{label:2}},[t._v("快速退款")]),r("el-checkbox",{attrs:{label:3}},[t._v("免费包邮")])],1)],1),r("el-form-item",{attrs:{label:"详细页标题："}},[r("el-input",{model:{value:t.value.detailTitle,callback:function(e){t.$set(t.value,"detailTitle",e)},expression:"value.detailTitle"}})],1),r("el-form-item",{attrs:{label:"详细页描述："}},[r("el-input",{model:{value:t.value.detailDesc,callback:function(e){t.$set(t.value,"detailDesc",e)},expression:"value.detailDesc"}})],1),r("el-form-item",{attrs:{label:"商品关键字："}},[r("el-input",{model:{value:t.value.keywords,callback:function(e){t.$set(t.value,"keywords",e)},expression:"value.keywords"}})],1),r("el-form-item",{attrs:{label:"商品备注："}},[r("el-input",{attrs:{type:"textarea",autoSize:!0},model:{value:t.value.note,callback:function(e){t.$set(t.value,"note",e)},expression:"value.note"}})],1),r("el-form-item",{attrs:{label:"选择优惠方式："}},[r("el-radio-group",{attrs:{size:"small"},model:{value:t.value.promotionType,callback:function(e){t.$set(t.value,"promotionType",e)},expression:"value.promotionType"}},[r("el-radio-button",{attrs:{label:0}},[t._v("无优惠")]),r("el-radio-button",{attrs:{label:1}},[t._v("特惠促销")]),r("el-radio-button",{attrs:{label:2}},[t._v("会员价格")]),r("el-radio-button",{attrs:{label:3}},[t._v("阶梯价格")]),r("el-radio-button",{attrs:{label:4}},[t._v("满减价格")])],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===t.value.promotionType,expression:"value.promotionType === 1"}]},[r("div",[t._v(" 开始时间： "),r("el-date-picker",{attrs:{"value-format":"timestamp",type:"datetime","picker-options":t.pickerOptions1,placeholder:"选择开始时间"},model:{value:t.value.promotionStartTime,callback:function(e){t.$set(t.value,"promotionStartTime",e)},expression:"value.promotionStartTime"}})],1),r("div",{staticClass:"littleMargin"},[t._v(" 结束时间： "),r("el-date-picker",{attrs:{"value-format":"timestamp",type:"datetime","picker-options":t.pickerOptions1,placeholder:"选择结束时间"},model:{value:t.value.promotionEndTime,callback:function(e){t.$set(t.value,"promotionEndTime",e)},expression:"value.promotionEndTime"}})],1),r("div",{staticClass:"littleMargin"},[t._v(" 促销价格： "),r("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"输入促销价格"},model:{value:t.value.promotionPrice,callback:function(e){t.$set(t.value,"promotionPrice",e)},expression:"value.promotionPrice"}})],1)]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===t.value.promotionType,expression:"value.promotionType === 2"}]},t._l(t.value.memberPriceList,(function(e,a){return r("div",{key:a,class:{littleMargin:0!==a}},[t._v(" "+t._s(e.memberLevelName)+"： "),r("el-input",{staticStyle:{width:"200px"},model:{value:e.memberPrice,callback:function(r){t.$set(e,"memberPrice",r)},expression:"item.memberPrice"}})],1)})),0),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===t.value.promotionType,expression:"value.promotionType === 3"}]},[r("el-table",{staticStyle:{width:"80%"},attrs:{data:t.value.productLadderList,border:""}},[r("el-table-column",{attrs:{label:"数量",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{model:{value:e.row.count,callback:function(r){t.$set(e.row,"count",r)},expression:"scope.row.count"}})]}}])}),r("el-table-column",{attrs:{label:"折扣",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{model:{value:e.row.discount,callback:function(r){t.$set(e.row,"discount",r)},expression:"scope.row.discount"}})]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.handleRemoveProductLadder(e.$index,e.row)}}},[t._v("删除")]),r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.handleAddProductLadder(e.$index,e.row)}}},[t._v("添加")])]}}])})],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:4===t.value.promotionType,expression:"value.promotionType === 4"}]},[r("el-table",{staticStyle:{width:"80%"},attrs:{data:t.value.productFullReductionList,border:""}},[r("el-table-column",{attrs:{label:"满",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{model:{value:e.row.fullPrice,callback:function(r){t.$set(e.row,"fullPrice",r)},expression:"scope.row.fullPrice"}})]}}])}),r("el-table-column",{attrs:{label:"立减",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{model:{value:e.row.reducePrice,callback:function(r){t.$set(e.row,"reducePrice",r)},expression:"scope.row.reducePrice"}})]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.handleRemoveFullReduction(e.$index,e.row)}}},[t._v("删除")]),r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.handleAddFullReduction(e.$index,e.row)}}},[t._v("添加")])]}}])})],1)],1),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品信息")]),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleNext}},[t._v("下一步，填写商品属性")])],1)],1)],1)},m=[],b=(r("1276"),r("ac1f"),r("a9e3"),r("8a79"),r("a434"),r("b775"));function g(t){return Object(b["a"])({url:"/memberLevel/list",method:"get",params:t})}var P={name:"ProductSaleDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{pickerOptions1:{disabledDate:function(t){return t.getTime()<Date.now()}}}},created:function(){var t=this;this.isEdit||g({defaultStatus:0}).then((function(e){for(var r=[],a=0;a<e.data.length;a++){var i=e.data[a];r.push({memberLevelId:i.id,memberLevelName:i.name})}t.value.memberPriceList=r}))},computed:{selectServiceList:{get:function(){var t=[];if(void 0===this.value.serviceIds||null==this.value.serviceIds||""===this.value.serviceIds)return t;for(var e=this.value.serviceIds.split(","),r=0;r<e.length;r++)t.push(Number(e[r]));return t},set:function(t){var e="";if(null!=t&&t.length>0){for(var r=0;r<t.length;r++)e+=t[r]+",";e.endsWith(",")&&(e=e.substr(0,e.length-1)),this.value.serviceIds=e}else this.value.serviceIds=null}}},methods:{handleEditCreated:function(){var t=this.value.serviceIds.split(",");console.log("handleEditCreated",t);for(var e=0;e<t.length;e++)this.selectServiceList.push(Number(t[e]))},handleRemoveProductLadder:function(t,e){var r=this.value.productLadderList;1===r.length?(r.pop(),r.push({count:0,discount:0,price:0})):r.splice(t,1)},handleAddProductLadder:function(t,e){var r=this.value.productLadderList;r.length<3?r.push({count:0,discount:0,price:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handleRemoveFullReduction:function(t,e){var r=this.value.productFullReductionList;1===r.length?(r.pop(),r.push({fullPrice:0,reducePrice:0})):r.splice(t,1)},handleAddFullReduction:function(t,e){var r=this.value.productFullReductionList;r.length<3?r.push({fullPrice:0,reducePrice:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handlePrev:function(){this.$emit("prevStep")},handleNext:function(){this.$emit("nextStep")}}},k=P,y=(r("8dfb"),Object(p["a"])(k,v,m,!1,null,"53c214b0",null)),x=y.exports,S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"margin-top":"50px"}},[r("el-form",{ref:"productAttrForm",staticStyle:{width:"720px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"属性类型："}},[r("el-select",{attrs:{placeholder:"请选择属性类型"},on:{change:t.handleProductAttrChange},model:{value:t.value.productAttributeCategoryId,callback:function(e){t.$set(t.value,"productAttributeCategoryId",e)},expression:"value.productAttributeCategoryId"}},t._l(t.productAttributeCategoryOptions,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),r("el-form-item",{attrs:{label:"商品规格："}},[r("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.selectProductAttr,(function(e,a){return r("div",{key:a},[t._v(" "+t._s(e.name)+"： "),0===e.handAddStatus?r("el-checkbox-group",{model:{value:t.selectProductAttr[a].values,callback:function(e){t.$set(t.selectProductAttr[a],"values",e)},expression:"selectProductAttr[idx].values"}},t._l(t.getInputListArr(e.inputList),(function(t){return r("el-checkbox",{key:t,staticClass:"littleMarginLeft",attrs:{label:t}})})),1):r("div",[r("el-checkbox-group",{model:{value:t.selectProductAttr[a].values,callback:function(e){t.$set(t.selectProductAttr[a],"values",e)},expression:"selectProductAttr[idx].values"}},t._l(t.selectProductAttr[a].options,(function(e,i){return r("div",{key:i,staticClass:"littleMarginLeft",staticStyle:{display:"inline-block"}},[r("el-checkbox",{key:e,attrs:{label:e}}),r("el-button",{staticClass:"littleMarginLeft",attrs:{type:"text"},on:{click:function(e){return t.handleRemoveProductAttrValue(a,i)}}},[t._v("删除")])],1)})),0),r("el-input",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{clearable:""},model:{value:t.addProductAttrValue,callback:function(e){t.addProductAttrValue=e},expression:"addProductAttrValue"}}),r("el-button",{staticClass:"littleMarginLeft",on:{click:function(e){return t.handleAddProductAttrValue(a)}}},[t._v("增加")])],1)],1)})),0),r("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.value.skuStockList,border:""}},[t._l(t.selectProductAttr,(function(e,a){return r("el-table-column",{key:e.id,attrs:{label:e.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.getProductSkuSp(e.row,a)))]}}],null,!0)})})),r("el-table-column",{attrs:{align:"center",label:"销售价格",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{model:{value:e.row.price,callback:function(r){t.$set(e.row,"price",r)},expression:"scope.row.price"}})]}}])}),r("el-table-column",{attrs:{align:"center",label:"商品库存",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{model:{value:e.row.stock,callback:function(r){t.$set(e.row,"stock",r)},expression:"scope.row.stock"}})]}}])}),r("el-table-column",{attrs:{align:"center",label:"库存预警值",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{model:{value:e.row.lowStock,callback:function(r){t.$set(e.row,"lowStock",r)},expression:"scope.row.lowStock"}})]}}])}),r("el-table-column",{attrs:{align:"center",label:"SKU编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{model:{value:e.row.skuCode,callback:function(r){t.$set(e.row,"skuCode",r)},expression:"scope.row.skuCode"}})]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.handleRemoveProductSku(e.$index,e.row)}}},[t._v("删除")])]}}])})],2),r("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleRefreshProductSkuList}},[t._v("刷新列表")]),r("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleSyncProductSkuPrice}},[t._v("同步价格")]),r("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleSyncProductSkuStock}},[t._v("同步库存")])],1),t.hasAttrPic?r("el-form-item",{attrs:{label:"属性图片："}},[r("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.selectProductAttrPics,(function(e,a){return r("div",{key:a},[r("span",[t._v(t._s(e.name)+":")]),r("single-upload",{staticStyle:{width:"300px",display:"inline-block","margin-left":"10px"},model:{value:e.pic,callback:function(r){t.$set(e,"pic",r)},expression:"item.pic"}})],1)})),0)],1):t._e(),r("el-form-item",{attrs:{label:"商品参数："}},[r("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.selectProductParam,(function(e,a){return r("div",{key:a,class:{littleMarginTop:0!==a}},[r("div",{staticClass:"paramInputLabel"},[t._v(t._s(e.name)+":")]),1===e.inputType?r("el-select",{staticClass:"paramInput",model:{value:t.selectProductParam[a].value,callback:function(e){t.$set(t.selectProductParam[a],"value",e)},expression:"selectProductParam[index].value"}},t._l(t.getParamInputList(e.inputList),(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1):r("el-input",{staticClass:"paramInput",model:{value:t.selectProductParam[a].value,callback:function(e){t.$set(t.selectProductParam[a],"value",e)},expression:"selectProductParam[index].value"}})],1)})),0)],1),r("el-form-item",{attrs:{label:"商品相册："}},[r("multi-upload",{model:{value:t.selectProductPics,callback:function(e){t.selectProductPics=e},expression:"selectProductPics"}})],1),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品促销")]),r("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.handleNext}},[t._v("下一步，选择商品关联")])],1)],1)],1)},w=[],A=(r("6062"),r("d3b7"),r("3ca3"),r("ddb0"),r("a630"),r("99af"),r("5e35")),O=r("c8aa"),L=r("0f39"),I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-upload",{attrs:{action:t.useOss?t.ossUploadUrl:t.minioUploadUrl,data:t.useOss?t.dataObj:null,"list-type":"picture-card","file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview,limit:t.maxCount,"on-exceed":t.handleExceed}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},E=[],j=r("6e0d"),C={name:"multiUpload",props:{value:Array,maxCount:{type:Number,default:5}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1,dialogImageUrl:null,useOss:!0,ossUploadUrl:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com",minioUploadUrl:"http://localhost:8080/minio/upload"}},computed:{fileList:function(){for(var t=[],e=0;e<this.value.length;e++)t.push({url:this.value[e]});return t}},methods:{emitInput:function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].url);this.$emit("input",e)},handleRemove:function(t,e){this.emitInput(e)},handlePreview:function(t){this.dialogVisible=!0,this.dialogImageUrl=t.url},beforeUpload:function(t){var e=this;return!this.useOss||new Promise((function(t,r){Object(j["a"])().then((function(r){e.dataObj.policy=r.data.policy,e.dataObj.signature=r.data.signature,e.dataObj.ossaccessKeyId=r.data.accessKeyId,e.dataObj.key=r.data.dir+"/${filename}",e.dataObj.dir=r.data.dir,e.dataObj.host=r.data.host,t(!0)})).catch((function(t){console.log(t),r(!1)}))}))},handleUploadSuccess:function(t,e){var r=this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name;this.useOss||(r=t.data.url),this.fileList.push({name:e.name,url:r}),this.emitInput(this.fileList)},handleExceed:function(t,e){this.$message({message:"最多只能上传"+this.maxCount+"张图片",type:"warning",duration:1e3})}}},_=C,$=Object(p["a"])(_,I,E,!1,null,null,null),R=$.exports,N={name:"ProductAttrDetail",components:{SingleUpload:L["a"],MultiUpload:R},props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,productAttributeCategoryOptions:[],selectProductAttr:[],selectProductParam:[],selectProductAttrPics:[],addProductAttrValue:"",activeHtmlName:"pc"}},computed:{hasAttrPic:function(){return!(this.selectProductAttrPics.length<1)},productId:function(){return this.value.id},selectProductPics:{get:function(){var t=[];if(void 0===this.value.pic||null==this.value.pic||""===this.value.pic)return t;if(t.push(this.value.pic),void 0===this.value.albumPics||null==this.value.albumPics||""===this.value.albumPics)return t;for(var e=this.value.albumPics.split(","),r=0;r<e.length;r++)t.push(e[r]);return t},set:function(t){if(null==t||0===t.length)this.value.pic=null,this.value.albumPics=null;else if(this.value.pic=t[0],this.value.albumPics="",t.length>1)for(var e=1;e<t.length;e++)this.value.albumPics+=t[e],e!==t.length-1&&(this.value.albumPics+=",")}}},created:function(){this.getProductAttrCateList()},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())}},methods:{handleEditCreated:function(){null!=this.value.productAttributeCategoryId&&this.handleProductAttrChange(this.value.productAttributeCategoryId),this.hasEditCreated=!0},getProductAttrCateList:function(){var t=this,e={pageNum:1,pageSize:100};Object(A["c"])(e).then((function(e){t.productAttributeCategoryOptions=[];for(var r=e.data.list,a=0;a<r.length;a++)t.productAttributeCategoryOptions.push({label:r[a].name,value:r[a].id})}))},getProductAttrList:function(t,e){var r=this,a={pageNum:1,pageSize:100,type:t};Object(O["c"])(e,a).then((function(e){var a=e.data.list;if(0===t){r.selectProductAttr=[];for(var i=0;i<a.length;i++){var n=[],l=[];r.isEdit&&(1===a[i].handAddStatus&&(n=r.getEditAttrOptions(a[i].id)),l=r.getEditAttrValues(i)),r.selectProductAttr.push({id:a[i].id,name:a[i].name,handAddStatus:a[i].handAddStatus,inputList:a[i].inputList,values:l,options:n})}r.isEdit&&r.refreshProductAttrPics()}else{r.selectProductParam=[];for(var u=0;u<a.length;u++){var o=null;r.isEdit&&(o=r.getEditParamValue(a[u].id)),r.selectProductParam.push({id:a[u].id,name:a[u].name,value:o,inputType:a[u].inputType,inputList:a[u].inputList})}}}))},getEditAttrOptions:function(t){for(var e=[],r=0;r<this.value.productAttributeValueList.length;r++){var a=this.value.productAttributeValueList[r];if(a.productAttributeId===t){for(var i=a.value.split(","),n=0;n<i.length;n++)e.push(i[n]);break}}return e},getEditAttrValues:function(t){var e=new Set;if(0===t)for(var r=0;r<this.value.skuStockList.length;r++){var a=this.value.skuStockList[r],i=JSON.parse(a.spData);null!=i&&i.length>=1&&e.add(i[0].value)}else if(1===t)for(var n=0;n<this.value.skuStockList.length;n++){var l=this.value.skuStockList[n],u=JSON.parse(l.spData);null!=u&&u.length>=2&&e.add(u[1].value)}else for(var o=0;o<this.value.skuStockList.length;o++){var s=this.value.skuStockList[o],c=JSON.parse(s.spData);null!=c&&c.length>=3&&e.add(c[2].value)}return Array.from(e)},getEditParamValue:function(t){for(var e=0;e<this.value.productAttributeValueList.length;e++)if(t===this.value.productAttributeValueList[e].productAttributeId)return this.value.productAttributeValueList[e].value},handleProductAttrChange:function(t){this.getProductAttrList(0,t),this.getProductAttrList(1,t)},getInputListArr:function(t){return t.split(",")},handleAddProductAttrValue:function(t){var e=this.selectProductAttr[t].options;null!=this.addProductAttrValue&&""!=this.addProductAttrValue?-1===e.indexOf(this.addProductAttrValue)?(this.selectProductAttr[t].options.push(this.addProductAttrValue),this.addProductAttrValue=null):this.$message({message:"属性值不能重复",type:"warning",duration:1e3}):this.$message({message:"属性值不能为空",type:"warning",duration:1e3})},handleRemoveProductAttrValue:function(t,e){this.selectProductAttr[t].options.splice(e,1)},getProductSkuSp:function(t,e){var r=JSON.parse(t.spData);return null!=r&&e<r.length?r[e].value:null},handleRefreshProductSkuList:function(){var t=this;this.$confirm("刷新列表将导致sku信息重新生成，是否要刷新","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.refreshProductAttrPics(),t.refreshProductSkuList()}))},handleSyncProductSkuPrice:function(){var t=this;this.$confirm("将同步第一个sku的价格到所有sku,是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(null!==t.value.skuStockList&&t.value.skuStockList.length>0){var e=[];e=e.concat(e,t.value.skuStockList);for(var r=t.value.skuStockList[0].price,a=0;a<e.length;a++)e[a].price=r;t.value.skuStockList=[],t.value.skuStockList=t.value.skuStockList.concat(t.value.skuStockList,e)}}))},handleSyncProductSkuStock:function(){var t=this;this.$confirm("将同步第一个sku的库存到所有sku,是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(null!==t.value.skuStockList&&t.value.skuStockList.length>0){var e=[];e=e.concat(e,t.value.skuStockList);for(var r=t.value.skuStockList[0].stock,a=t.value.skuStockList[0].lowStock,i=0;i<e.length;i++)e[i].stock=r,e[i].lowStock=a;t.value.skuStockList=[],t.value.skuStockList=t.value.skuStockList.concat(t.value.skuStockList,e)}}))},refreshProductSkuList:function(){this.value.skuStockList=[];var t=this.value.skuStockList;if(1===this.selectProductAttr.length)for(var e=this.selectProductAttr[0],r=0;r<e.values.length;r++)t.push({spData:JSON.stringify([{key:e.name,value:e.values[r]}])});else if(2===this.selectProductAttr.length)for(var a=this.selectProductAttr[0],i=this.selectProductAttr[1],n=0;n<a.values.length;n++)if(0!==i.values.length)for(var l=0;l<i.values.length;l++){var u=[];u.push({key:a.name,value:a.values[n]}),u.push({key:i.name,value:i.values[l]}),t.push({spData:JSON.stringify(u)})}else t.push({spData:JSON.stringify([{key:a.name,value:a.values[n]}])});else for(var o=this.selectProductAttr[0],s=this.selectProductAttr[1],c=this.selectProductAttr[2],d=0;d<o.values.length;d++)if(0!==s.values.length)for(var p=0;p<s.values.length;p++)if(0!==c.values.length)for(var f=0;f<c.values.length;f++){var h=[];h.push({key:o.name,value:o.values[d]}),h.push({key:s.name,value:s.values[p]}),h.push({key:c.name,value:c.values[f]}),t.push({spData:JSON.stringify(h)})}else{var v=[];v.push({key:o.name,value:o.values[d]}),v.push({key:s.name,value:s.values[p]}),t.push({spData:JSON.stringify(v)})}else t.push({spData:JSON.stringify([{key:o.name,value:o.values[d]}])})},refreshProductAttrPics:function(){if(this.selectProductAttrPics=[],this.selectProductAttr.length>=1)for(var t=this.selectProductAttr[0].values,e=0;e<t.length;e++){var r=null;this.isEdit&&(r=this.getProductSkuPic(t[e])),this.selectProductAttrPics.push({name:t[e],pic:r})}},getProductSkuPic:function(t){for(var e=0;e<this.value.skuStockList.length;e++){var r=JSON.parse(this.value.skuStockList[e].spData);if(t===r[0].value)return this.value.skuStockList[e].pic}return null},mergeProductAttrValue:function(){this.value.productAttributeValueList=[];for(var t=0;t<this.selectProductAttr.length;t++){var e=this.selectProductAttr[t];1===e.handAddStatus&&null!=e.options&&e.options.length>0&&this.value.productAttributeValueList.push({productAttributeId:e.id,value:this.getOptionStr(e.options)})}for(var r=0;r<this.selectProductParam.length;r++){var a=this.selectProductParam[r];this.value.productAttributeValueList.push({productAttributeId:a.id,value:a.value})}},mergeProductAttrPics:function(){for(var t=0;t<this.selectProductAttrPics.length;t++)for(var e=0;e<this.value.skuStockList.length;e++){var r=JSON.parse(this.value.skuStockList[e].spData);r[0].value===this.selectProductAttrPics[t].name&&(this.value.skuStockList[e].pic=this.selectProductAttrPics[t].pic)}},getOptionStr:function(t){for(var e="",r=0;r<t.length;r++)e+=t[r],r!=t.length-1&&(e+=",");return e},handleRemoveProductSku:function(t,e){var r=this.value.skuStockList;1===r.length?r.pop():r.splice(t,1)},getParamInputList:function(t){return t.split(",")},handlePrev:function(){this.$emit("prevStep")},handleNext:function(){this.mergeProductAttrValue(),this.mergeProductAttrPics(),this.$emit("nextStep")}}},T=N,U=(r("1560"),Object(p["a"])(T,S,w,!1,null,"f9968e82",null)),V=U.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"margin-top":"50px"}},[r("el-form",{ref:"productRelationForm",staticStyle:{width:"680px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"关联专题："}},[r("el-transfer",{staticStyle:{display:"inline-block"},attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入专题名称",titles:t.subjectTitles,data:t.subjectList},model:{value:t.selectSubject,callback:function(e){t.selectSubject=e},expression:"selectSubject"}})],1),r("el-form-item",{attrs:{label:"关联优选："}},[r("el-transfer",{staticStyle:{display:"inline-block"},attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入优选名称",titles:t.prefrenceAreaTitles,data:t.prefrenceAreaList},model:{value:t.selectPrefrenceArea,callback:function(e){t.selectPrefrenceArea=e},expression:"selectPrefrenceArea"}})],1),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品属性")]),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleFinishCommit}},[t._v("完成，提交商品")])],1)],1)],1)},z=[],F=r("c418");function B(){return Object(b["a"])({url:"/prefrenceArea/listAll",method:"get"})}var M={name:"ProductRelationDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{subjectList:[],subjectTitles:["待选择","已选择"],prefrenceAreaList:[],prefrenceAreaTitles:["待选择","已选择"]}},created:function(){this.getSubjectList(),this.getPrefrenceAreaList()},computed:{selectSubject:{get:function(){var t=[];if(null==this.value.subjectProductRelationList||this.value.subjectProductRelationList.length<=0)return t;for(var e=0;e<this.value.subjectProductRelationList.length;e++)t.push(this.value.subjectProductRelationList[e].subjectId);return t},set:function(t){this.value.subjectProductRelationList=[];for(var e=0;e<t.length;e++)this.value.subjectProductRelationList.push({subjectId:t[e]})}},selectPrefrenceArea:{get:function(){var t=[];if(null==this.value.prefrenceAreaProductRelationList||this.value.prefrenceAreaProductRelationList.length<=0)return t;for(var e=0;e<this.value.prefrenceAreaProductRelationList.length;e++)t.push(this.value.prefrenceAreaProductRelationList[e].prefrenceAreaId);return t},set:function(t){this.value.prefrenceAreaProductRelationList=[];for(var e=0;e<t.length;e++)this.value.prefrenceAreaProductRelationList.push({prefrenceAreaId:t[e]})}}},methods:{filterMethod:function(t,e){return e.label.indexOf(t)>-1},getSubjectList:function(){var t=this;Object(F["b"])().then((function(e){for(var r=e.data,a=0;a<r.length;a++)t.subjectList.push({label:r[a].title,key:r[a].id})}))},getPrefrenceAreaList:function(){var t=this;B().then((function(e){for(var r=e.data,a=0;a<r.length;a++)t.prefrenceAreaList.push({label:r[a].name,key:r[a].id})}))},handlePrev:function(){this.$emit("prevStep")},handleFinishCommit:function(){this.$emit("finishCommit",this.isEdit)}}},J=M,K=Object(p["a"])(J,D,z,!1,null,"2c3beb80",null),q=K.exports,G={albumPics:"",brandId:null,brandName:"",deleteStatus:0,description:"",detailDesc:"",detailHtml:"",detailMobileHtml:"",detailTitle:"",feightTemplateId:0,flashPromotionCount:0,flashPromotionId:0,flashPromotionPrice:0,flashPromotionSort:0,giftPoint:0,giftGrowth:0,keywords:"",lowStock:0,name:"",newStatus:0,note:"",originalPrice:0,pic:"",memberPriceList:[],productFullReductionList:[{fullPrice:0,reducePrice:0}],productLadderList:[{count:0,discount:0,price:0}],previewStatus:0,price:0,productAttributeCategoryId:null,productAttributeValueList:[],skuStockList:[],subjectProductRelationList:[],prefrenceAreaProductRelationList:[],productCategoryId:null,productCategoryName:"",productSn:"",promotionEndTime:"",promotionPerLimit:0,promotionPrice:null,promotionStartTime:"",promotionType:0,publishStatus:0,recommandStatus:0,sale:0,serviceIds:"",sort:0,stock:0,subTitle:"",unit:"",usePointLimit:0,verifyStatus:0,weight:0},W={name:"ProductDetail",components:{ProductInfoDetail:h,ProductSaleDetail:x,ProductAttrDetail:V,ProductRelationDetail:q},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{active:0,productParam:Object.assign({},G),showStatus:[!0,!1,!1,!1]}},created:function(){var t=this;this.isEdit&&Object(s["d"])(this.$route.query.id).then((function(e){t.productParam=e.data}))},methods:{hideAll:function(){for(var t=0;t<this.showStatus.length;t++)this.showStatus[t]=!1},prevStep:function(){this.active>0&&this.active<this.showStatus.length&&(this.active--,this.hideAll(),this.showStatus[this.active]=!0)},nextStep:function(){this.active<this.showStatus.length-1&&(this.active++,this.hideAll(),this.showStatus[this.active]=!0)},finishCommit:function(t){var e=this;this.$confirm("是否要提交该产品","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t?Object(s["g"])(e.$route.query.id,e.productParam).then((function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),e.$router.back()})):Object(s["a"])(e.productParam).then((function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),location.reload()}))}))}}},Y=W,H=(r("3b1d"),Object(p["a"])(Y,a,i,!1,null,null,null));e["a"]=H.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("1d80"),i=r("5899"),n="["+i+"]",l=RegExp("^"+n+n+"*"),u=RegExp(n+n+"*$"),o=function(t){return function(e){var r=String(a(e));return 1&t&&(r=r.replace(l,"")),2&t&&(r=r.replace(u,"")),r}};t.exports={start:o(1),end:o(2),trim:o(3)}},"5a34":function(t,e,r){var a=r("44e7");t.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5e35":function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return l})),r.d(e,"e",(function(){return u})),r.d(e,"d",(function(){return o}));var a=r("b775");function i(t){return Object(a["a"])({url:"/productAttribute/category/list",method:"get",params:t})}function n(t){return Object(a["a"])({url:"/productAttribute/category/create",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/productAttribute/category/delete/"+t,method:"get"})}function u(t,e){return Object(a["a"])({url:"/productAttribute/category/update/"+t,method:"post",data:e})}function o(){return Object(a["a"])({url:"/productAttribute/category/list/withAttr",method:"get"})}},6062:function(t,e,r){"use strict";var a=r("6d61"),i=r("6566");t.exports=a("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(t,e,r){"use strict";var a=r("9bf2").f,i=r("7c73"),n=r("e2cc"),l=r("0366"),u=r("19aa"),o=r("2266"),s=r("7dd0"),c=r("2626"),d=r("83ab"),p=r("f183").fastKey,f=r("69f3"),h=f.set,v=f.getterFor;t.exports={getConstructor:function(t,e,r,s){var c=t((function(t,a){u(t,c,e),h(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=a&&o(a,t[s],{that:t,AS_ENTRIES:r})})),f=v(e),m=function(t,e,r){var a,i,n=f(t),l=b(t,e);return l?l.value=r:(n.last=l={index:i=p(e,!0),key:e,value:r,previous:a=n.last,next:void 0,removed:!1},n.first||(n.first=l),a&&(a.next=l),d?n.size++:t.size++,"F"!==i&&(n.index[i]=l)),t},b=function(t,e){var r,a=f(t),i=p(e);if("F"!==i)return a.index[i];for(r=a.first;r;r=r.next)if(r.key==e)return r};return n(c.prototype,{clear:function(){var t=this,e=f(t),r=e.index,a=e.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete r[a.index],a=a.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,r=f(e),a=b(e,t);if(a){var i=a.next,n=a.previous;delete r.index[a.index],a.removed=!0,n&&(n.next=i),i&&(i.previous=n),r.first==a&&(r.first=i),r.last==a&&(r.last=n),d?r.size--:e.size--}return!!a},forEach:function(t){var e,r=f(this),a=l(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:r.first){a(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!b(this,t)}}),n(c.prototype,r?{get:function(t){var e=b(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),d&&a(c.prototype,"size",{get:function(){return f(this).size}}),c},setStrong:function(t,e,r){var a=e+" Iterator",i=v(e),n=v(a);s(t,e,(function(t,e){h(this,{type:a,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=n(this),e=t.kind,r=t.last;while(r&&r.removed)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),c(e)}}},"6d61":function(t,e,r){"use strict";var a=r("23e7"),i=r("da84"),n=r("94ca"),l=r("6eeb"),u=r("f183"),o=r("2266"),s=r("19aa"),c=r("861d"),d=r("d039"),p=r("1c7e"),f=r("d44e"),h=r("7156");t.exports=function(t,e,r){var v=-1!==t.indexOf("Map"),m=-1!==t.indexOf("Weak"),b=v?"set":"add",g=i[t],P=g&&g.prototype,k=g,y={},x=function(t){var e=P[t];l(P,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(m&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!c(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!c(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})},S=n(t,"function"!=typeof g||!(m||P.forEach&&!d((function(){(new g).entries().next()}))));if(S)k=r.getConstructor(e,t,v,b),u.REQUIRED=!0;else if(n(t,!0)){var w=new k,A=w[b](m?{}:-0,1)!=w,O=d((function(){w.has(1)})),L=p((function(t){new g(t)})),I=!m&&d((function(){var t=new g,e=5;while(e--)t[b](e,e);return!t.has(-0)}));L||(k=e((function(e,r){s(e,k,t);var a=h(new g,e,k);return void 0!=r&&o(r,a[b],{that:a,AS_ENTRIES:v}),a})),k.prototype=P,P.constructor=k),(O||I)&&(x("delete"),x("has"),v&&x("get")),(I||A)&&x(b),m&&P.clear&&delete P.clear}return y[t]=k,a({global:!0,forced:k!=g},y),f(k,t),m||r.setStrong(k,t,v),k}},"6e0d":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var a=r("b775");function i(){return Object(a["a"])({url:"/aliyun/oss/policy",method:"get"})}},7156:function(t,e,r){var a=r("861d"),i=r("d2bb");t.exports=function(t,e,r){var n,l;return i&&"function"==typeof(n=e.constructor)&&n!==r&&a(l=n.prototype)&&l!==r.prototype&&i(t,l),t}},"8a79":function(t,e,r){"use strict";var a=r("23e7"),i=r("06cf").f,n=r("50c4"),l=r("5a34"),u=r("1d80"),o=r("ab13"),s=r("c430"),c="".endsWith,d=Math.min,p=o("endsWith"),f=!s&&!p&&!!function(){var t=i(String.prototype,"endsWith");return t&&!t.writable}();a({target:"String",proto:!0,forced:!f&&!p},{endsWith:function(t){var e=String(u(this));l(t);var r=arguments.length>1?arguments[1]:void 0,a=n(e.length),i=void 0===r?a:d(n(r),a),o=String(t);return c?c.call(e,o,i):e.slice(i-o.length,i)===o}})},"8aa5":function(t,e,r){"use strict";var a=r("6547").charAt;t.exports=function(t,e,r){return e+(r?a(t,e).length:1)}},"8cd2":function(t,e,r){},"8dfb":function(t,e,r){"use strict";r("4e11")},9263:function(t,e,r){"use strict";var a=r("ad6d"),i=r("9f7f"),n=RegExp.prototype.exec,l=String.prototype.replace,u=n,o=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),s=i.UNSUPPORTED_Y||i.BROKEN_CARET,c=void 0!==/()??/.exec("")[1],d=o||c||s;d&&(u=function(t){var e,r,i,u,d=this,p=s&&d.sticky,f=a.call(d),h=d.source,v=0,m=t;return p&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),m=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(h="(?: "+h+")",m=" "+m,v++),r=new RegExp("^(?:"+h+")",f)),c&&(r=new RegExp("^"+h+"$(?!\\s)",f)),o&&(e=d.lastIndex),i=n.call(p?r:d,m),p?i?(i.input=i.input.slice(v),i[0]=i[0].slice(v),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:o&&i&&(d.lastIndex=d.global?i.index+i[0].length:e),c&&i&&i.length>1&&l.call(i[0],r,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(i[u]=void 0)})),i}),t.exports=u},"9add":function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return n})),r.d(e,"g",(function(){return l})),r.d(e,"f",(function(){return u})),r.d(e,"b",(function(){return o})),r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return c}));var a=r("b775");function i(t){return Object(a["a"])({url:"/brand/list",method:"get",params:t})}function n(t){return Object(a["a"])({url:"/brand/create",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/brand/update/showStatus",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/brand/update/factoryStatus",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/brand/delete/"+t,method:"get"})}function s(t){return Object(a["a"])({url:"/brand/"+t,method:"get"})}function c(t,e){return Object(a["a"])({url:"/brand/update/"+t,method:"post",data:e})}},"9f7f":function(t,e,r){"use strict";var a=r("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=a((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=a((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a434:function(t,e,r){"use strict";var a=r("23e7"),i=r("23cb"),n=r("a691"),l=r("50c4"),u=r("7b0b"),o=r("65f0"),s=r("8418"),c=r("1dde"),d=c("splice"),p=Math.max,f=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var r,a,c,d,m,b,g=u(this),P=l(g.length),k=i(t,P),y=arguments.length;if(0===y?r=a=0:1===y?(r=0,a=P-k):(r=y-2,a=f(p(n(e),0),P-k)),P+r-a>h)throw TypeError(v);for(c=o(g,a),d=0;d<a;d++)m=k+d,m in g&&s(c,d,g[m]);if(c.length=a,r<a){for(d=k;d<P-a;d++)m=d+a,b=d+r,m in g?g[b]=g[m]:delete g[b];for(d=P;d>P-a+r;d--)delete g[d-1]}else if(r>a)for(d=P-a;d>k;d--)m=d+a-1,b=d+r-1,m in g?g[b]=g[m]:delete g[b];for(d=0;d<r;d++)g[d+k]=arguments[d+2];return g.length=P-a+r,c}})},a9e3:function(t,e,r){"use strict";var a=r("83ab"),i=r("da84"),n=r("94ca"),l=r("6eeb"),u=r("5135"),o=r("c6b6"),s=r("7156"),c=r("c04e"),d=r("d039"),p=r("7c73"),f=r("241c").f,h=r("06cf").f,v=r("9bf2").f,m=r("58a8").trim,b="Number",g=i[b],P=g.prototype,k=o(p(P))==b,y=function(t){var e,r,a,i,n,l,u,o,s=c(t,!1);if("string"==typeof s&&s.length>2)if(s=m(s),e=s.charCodeAt(0),43===e||45===e){if(r=s.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(s.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+s}for(n=s.slice(2),l=n.length,u=0;u<l;u++)if(o=n.charCodeAt(u),o<48||o>i)return NaN;return parseInt(n,a)}return+s};if(n(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var x,S=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof S&&(k?d((function(){P.valueOf.call(r)})):o(r)!=b)?s(new g(y(e)),r,S):y(e)},w=a?f(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),A=0;w.length>A;A++)u(g,x=w[A])&&!u(S,x)&&v(S,x,h(g,x));S.prototype=P,P.constructor=S,l(i,b,S)}},ab13:function(t,e,r){var a=r("b622"),i=a("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,"/./"[t](e)}catch(a){}}return!1}},ac1f:function(t,e,r){"use strict";var a=r("23e7"),i=r("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(t,e,r){"use strict";var a=r("825a");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},bb2f:function(t,e,r){var a=r("d039");t.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c418:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return n}));var a=r("b775");function i(){return Object(a["a"])({url:"/subject/listAll",method:"get"})}function n(t){return Object(a["a"])({url:"/subject/list",method:"get",params:t})}},c4c8:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return n})),r.d(e,"e",(function(){return l})),r.d(e,"f",(function(){return u})),r.d(e,"i",(function(){return o})),r.d(e,"h",(function(){return s})),r.d(e,"a",(function(){return c})),r.d(e,"g",(function(){return d})),r.d(e,"d",(function(){return p}));var a=r("b775");function i(t){return Object(a["a"])({url:"/product/list",method:"get",params:t})}function n(t){return Object(a["a"])({url:"/product/simpleList",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/product/update/deleteStatus",method:"post",params:t})}function u(t){return Object(a["a"])({url:"/product/update/newStatus",method:"post",params:t})}function o(t){return Object(a["a"])({url:"/product/update/recommendStatus",method:"post",params:t})}function s(t){return Object(a["a"])({url:"/product/update/publishStatus",method:"post",params:t})}function c(t){return Object(a["a"])({url:"/product/create",method:"post",data:t})}function d(t,e){return Object(a["a"])({url:"/product/update/"+t,method:"post",data:e})}function p(t){return Object(a["a"])({url:"/product/updateInfo/"+t,method:"get"})}},c8aa:function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return l})),r.d(e,"f",(function(){return u})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return s}));var a=r("b775");function i(t,e){return Object(a["a"])({url:"/productAttribute/list/"+t,method:"get",params:e})}function n(t){return Object(a["a"])({url:"/productAttribute/delete",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/productAttribute/create",method:"post",data:t})}function u(t,e){return Object(a["a"])({url:"/productAttribute/update/"+t,method:"post",data:e})}function o(t){return Object(a["a"])({url:"/productAttribute/"+t,method:"get"})}function s(t){return Object(a["a"])({url:"/productAttribute/attrInfo/"+t,method:"get"})}},d1f3:function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return l})),r.d(e,"g",(function(){return u})),r.d(e,"e",(function(){return o})),r.d(e,"h",(function(){return s})),r.d(e,"f",(function(){return c})),r.d(e,"d",(function(){return d}));var a=r("b775");function i(t,e){return Object(a["a"])({url:"/productCategory/list/"+t,method:"get",params:e})}function n(t){return Object(a["a"])({url:"/productCategory/delete/"+t,method:"post"})}function l(t){return Object(a["a"])({url:"/productCategory/create",method:"post",data:t})}function u(t,e){return Object(a["a"])({url:"/productCategory/update/"+t,method:"post",data:e})}function o(t){return Object(a["a"])({url:"/productCategory/"+t,method:"get"})}function s(t){return Object(a["a"])({url:"/productCategory/update/showStatus",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/productCategory/update/navStatus",method:"post",data:t})}function d(){return Object(a["a"])({url:"/productCategory/list/withChildren",method:"get"})}},d784:function(t,e,r){"use strict";r("ac1f");var a=r("6eeb"),i=r("d039"),n=r("b622"),l=r("9263"),u=r("9112"),o=n("species"),s=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c=function(){return"$0"==="a".replace(/./,"$0")}(),d=n("replace"),p=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));t.exports=function(t,e,r,d){var h=n(t),v=!i((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),m=v&&!i((function(){var e=!1,r=/a/;return"split"===t&&(r={},r.constructor={},r.constructor[o]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return e=!0,null},r[h](""),!e}));if(!v||!m||"replace"===t&&(!s||!c||p)||"split"===t&&!f){var b=/./[h],g=r(h,""[t],(function(t,e,r,a,i){return e.exec===l?v&&!i?{done:!0,value:b.call(e,r,a)}:{done:!0,value:t.call(r,e,a)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),P=g[0],k=g[1];a(String.prototype,t,P),a(RegExp.prototype,h,2==e?function(t,e){return k.call(t,this,e)}:function(t){return k.call(t,this)})}d&&u(RegExp.prototype[h],"sham",!0)}},f183:function(t,e,r){var a=r("d012"),i=r("861d"),n=r("5135"),l=r("9bf2").f,u=r("90e3"),o=r("bb2f"),s=u("meta"),c=0,d=Object.isExtensible||function(){return!0},p=function(t){l(t,s,{value:{objectID:"O"+ ++c,weakData:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!n(t,s)){if(!d(t))return"F";if(!e)return"E";p(t)}return t[s].objectID},h=function(t,e){if(!n(t,s)){if(!d(t))return!0;if(!e)return!1;p(t)}return t[s].weakData},v=function(t){return o&&m.REQUIRED&&d(t)&&!n(t,s)&&p(t),t},m=t.exports={REQUIRED:!1,fastKey:f,getWeakData:h,onFreeze:v};a[s]=!0}}]);
//# sourceMappingURL=chunk-c4566e32.7ab03e57.js.map